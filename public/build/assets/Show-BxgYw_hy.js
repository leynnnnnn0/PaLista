import{a as I,c as Il,j as t,r as T,u as ll,t as y,H as $l,L as Hl,T as Rl}from"./app-DZntys-m.js";import{A as Bl,a as zl,b as Vl,c as Ul}from"./accordion-CoUevJld.js";import{A as Gl,a as Ql}from"./alert-BfofPuME.js";import{B as Xl}from"./badge-C3MflIkx.js";import{B as x}from"./button-RkJQsPIt.js";import{b as L,c as q,C as Fs,a as Ms}from"./card-B2F47Al_.js";import{D as nl,a as rl,b as il,c as ol,d as ml,e as cl}from"./dialog-D448X88Y.js";import{I as w}from"./input-nOiA85QL.js";import{L as f}from"./label-DvxDFbOp.js";import{S as Fl}from"./separator-DkN3UvT5.js";import{T as Tl}from"./textarea-C6OcuO_-.js";import{A as Wl}from"./app-layout-BjuE-y63.js";import{D as Jl}from"./download-Ppweuh-7.js";import{C as Kl}from"./circle-alert-BjDn8JK5.js";import{U as Yl}from"./user-CffXgdQr.js";import{F as Zl}from"./file-text-Dm4r5ULZ.js";import{C as en}from"./calendar-DvsOgWpN.js";import{D as tn}from"./dollar-sign-DQArDPqE.js";import{T as sn}from"./trending-up-BJL3tqWD.js";import{H as an}from"./history-D8I909NA.js";import{C as ln}from"./clock-B8PKokb0.js";/* empty css            */import"./index-CIdFnb59.js";import"./index-XVT5qSKr.js";import"./utils-s9lGP0pQ.js";import"./chevron-down-Yd36DyIC.js";import"./x-4og-W0wB.js";import"./index-CpME5DPB.js";import"./index-CdJ7nUgT.js";import"./index-CUIwh6W2.js";import"./mainLogo-COuSJye7.js";import"./users-DnUvuURB.js";const nn=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],rn=I("ArrowLeft",nn);const on=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]],Ll=I("Ban",on);const mn=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],cn=I("CircleX",mn);const dn=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],ql=I("CreditCard",dn);const pn=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],un=I("QrCode",pn);const xn=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],dl=I("SquarePen",xn);const fn=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],hn=I("Timer",fn);function yn(o){const e=Il.c(12),{children:s,title:M,description:S}=o;let g;e[0]!==M?(g=t.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:M}),e[0]=M,e[1]=g):g=e[1];let j;e[2]!==S?(j=t.jsx("p",{className:"mt-1 text-muted-foreground",children:S}),e[2]=S,e[3]=j):j=e[3];let N;e[4]!==g||e[5]!==j?(N=t.jsxs("div",{children:[g,j]}),e[4]=g,e[5]=j,e[6]=N):N=e[6];let _;e[7]!==s?(_=t.jsx("div",{className:"flex items-center justify-center gap-3",children:s}),e[7]=s,e[8]=_):_=e[8];let P;return e[9]!==N||e[10]!==_?(P=t.jsxs("div",{className:"flex flex-col justify-between gap-4 sm:flex-row sm:items-center",children:[N,_]}),e[9]=N,e[10]=_,e[11]=P):P=e[11],P}const _n=[{title:"Loans",href:"/my-pautang"}];function fr(o){const e=Il.c(537),{loan:s}=o,[M,S]=T.useState(!1),[g,j]=T.useState(!1),[N,_]=T.useState(!1),[P,Ls]=T.useState(!1),[p,pl]=T.useState(!1),[d,E]=T.useState(null),[b,qs]=T.useState(null);let Is;e[0]===Symbol.for("react.memo_cache_sentinel")?(Is={payment_schedule_id:"",penalty_amount:"",remarks:""},e[0]=Is):Is=e[0];const r=ll(Is);let Es;e[1]===Symbol.for("react.memo_cache_sentinel")?(Es={payment_schedule_id:"",amount_paid:"",payment_method:"cash",reference_number:"",receipt_number:"",payment_date:new Date().toISOString().split("T")[0]},e[1]=Es):Es=e[1];const n=ll(Es);let Os;e[2]===Symbol.for("react.memo_cache_sentinel")?(Os={amount_paid:"",payment_method:"cash",reference_number:"",receipt_number:"",payment_date:""},e[2]=Os):Os=e[2];const l=ll(Os);let $s;e[3]===Symbol.for("react.memo_cache_sentinel")?($s={void_reason:""},e[3]=$s):$s=e[3];const m=ll($s);let Hs;e[4]===Symbol.for("react.memo_cache_sentinel")?(Hs=()=>{Ls(!0)},e[4]=Hs):Hs=e[4];const El=Hs;let Rs;e[5]!==s.id||e[6]!==m?(Rs=i=>{i.preventDefault(),m.put(`/my-pautang/${s.id}/void`,{onSuccess:()=>{y.success("Loan voided successfully"),Ls(!1),m.reset()},onError:qn})},e[5]=s.id,e[6]=m,e[7]=Rs):Rs=e[7];const ul=Rs;let Bs;e[8]!==m?(Bs=()=>{Ls(!1),m.reset()},e[8]=m,e[9]=Bs):Bs=e[9];const xl=Bs,u=Ln,v=Tn,As=An;let O,$,H,R,B,z,V,U,G,Q,C,X,k,W,D,J,K,F,Y,Z;if(e[10]!==l||e[11]!==p||e[12]!==s.amount||e[13]!==s.borrower?.address||e[14]!==s.borrower?.contact_number||e[15]!==s.borrower?.full_name||e[16]!==s.duration||e[17]!==s.frequency||e[18]!==s.id||e[19]!==s.interest_type||e[20]!==s.interest_value||e[21]!==s.is_voided||e[22]!==s.loan_number||e[23]!==s.payment_frequency||e[24]!==s.payment_schedules||e[25]!==s.remaining_balance||e[26]!==s.status||e[27]!==s.total_amount||e[28]!==s.total_penalties||e[29]!==s.transaction_date||e[30]!==s.void_reason||e[31]!==s.voided_at||e[32]!==n||e[33]!==r||e[34]!==b){const i=s.payment_schedules?.reduce(Fn,0)||0,ja=s.total_amount>0?i/s.total_amount*100:0;let ba;e[55]!==r?(ba=a=>{if(a.status.toLowerCase()==="paid")return;E(a);const c=a.penalty_amount&&parseFloat(a.penalty_amount)>0;pl(c),r.setData({payment_schedule_id:a.id,penalty_amount:a.penalty_amount||"",remarks:""}),S(!0)},e[55]=r,e[56]=ba):ba=e[56];const Rt=ba;let ga;e[57]!==p||e[58]!==r?(ga=a=>{a.preventDefault();const c=`/payment-schedules/${r.data.payment_schedule_id}/penalty`;r.put(c,{onSuccess:()=>{y.success(p?"Penalty updated successfully":"Penalty added successfully"),S(!1),r.reset(),E(null),pl(!1)},onError:()=>{y.error(p?"Failed to update penalty":"Failed to add penalty")}})},e[57]=p,e[58]=r,e[59]=ga):ga=e[59],Q=ga;let Na;e[60]!==r?(Na=()=>{S(!1),r.reset(),E(null),pl(!1)},e[60]=r,e[61]=Na):Na=e[61],z=Na;let va;e[62]!==n?(va=a=>{if(a.status.toLowerCase()==="paid")return;E(a);const c=a.payment_histories?.reduce(Dn,0)||0,h=parseFloat(a.total_due)-c;n.setData({payment_schedule_id:a.id,amount_paid:h.toFixed(2),payment_method:"cash",reference_number:"",receipt_number:"",payment_date:new Date().toISOString().split("T")[0]}),j(!0)},e[62]=n,e[63]=va):va=e[63];const Bt=va;let wa;e[64]!==n?(wa=a=>{a.preventDefault(),n.post("/payment-histories",{onSuccess:()=>{y.success("Payment recorded successfully"),j(!1),n.reset(),E(null)},onError:kn})},e[64]=n,e[65]=wa):wa=e[65],G=wa;let Sa;e[66]!==n?(Sa=()=>{j(!1),n.reset(),E(null)},e[66]=n,e[67]=Sa):Sa=e[67],B=Sa;let Pa;e[68]!==l?(Pa=a=>{if(!a||!a.id){y.error("Invalid payment record");return}qs(a),l.setData({amount_paid:String(a.amount_paid),payment_method:a.payment_method,reference_number:a.reference_number||"",receipt_number:a.receipt_number||"",payment_date:a.payment_date}),_(!0)},e[68]=l,e[69]=Pa):Pa=e[69];const Ol=Pa;let Ca;e[70]!==l||e[71]!==b?(Ca=a=>{if(a.preventDefault(),!b?.id){y.error("Invalid payment record");return}l.put(`/payment-histories/${b.id}`,{onSuccess:()=>{y.success("Payment updated successfully"),_(!1),l.reset(),qs(null)},onError:Cn})},e[70]=l,e[71]=b,e[72]=Ca):Ca=e[72],U=Ca;let ka;e[73]!==l?(ka=()=>{_(!1),l.reset(),qs(null)},e[73]=l,e[74]=ka):ka=e[74],R=ka;let Da;e[75]!==l?(Da=a=>{if(!a){y.error("Invalid payment record");return}confirm("Are you sure you want to delete this payment record?")&&l.delete(`/payment-histories/${a}`,{onSuccess:()=>{y.success("Payment deleted successfully"),_(!1),l.reset(),qs(null)},onError:Pn})},e[75]=l,e[76]=Da):Da=e[76],V=Da;const Ml=(s.payment_schedules?.flatMap(a=>(a.payment_histories||[]).filter(Sn).map(c=>({id:c.id,payment_schedule_id:c.payment_schedule_id,amount_paid:c.amount_paid,payment_method:c.payment_method,reference_number:c.reference_number,receipt_number:c.receipt_number,payment_date:c.payment_date,schedule_number:s.payment_schedules.findIndex(h=>h.id===a.id)+1,due_date:a.due_date})))||[]).sort(wn);H=Wl,K=_n,e[77]===Symbol.for("react.memo_cache_sentinel")?(F=t.jsx($l,{title:"My Pautang Details"}),e[77]=F):F=e[77],J="p-4 sm:p-6 lg:p-8",W="grid grid-cols-1 gap-6 lg:grid-cols-3";let Fa;e[78]===Symbol.for("react.memo_cache_sentinel")?(Fa=t.jsx(yn,{title:"My Pautang Details",description:"Installment order details and payment schedule"}),e[78]=Fa):Fa=e[78];let zt;e[79]!==s.is_voided||e[80]!==s.status?(zt=!s.is_voided&&s.status!="completed"&&t.jsxs(x,{variant:"destructive",className:"cursor-pointer",onClick:()=>El(),children:[t.jsx(Ll,{className:"mr-2 h-4 w-4"}),"Void Loan"]}),e[79]=s.is_voided,e[80]=s.status,e[81]=zt):zt=e[81];let Vt;e[82]!==s.id||e[83]!==s.is_voided||e[84]!==s.status?(Vt=!s.is_voided&&s.status!="completed"&&t.jsx(x,{variant:"outline",asChild:!0,children:t.jsxs("a",{target:"_blank",href:`/my-pautang/${s.id}/promissory-note/download`,children:[t.jsx(Jl,{className:"mr-2 h-4 w-4"}),"Promissory Note"]})}),e[82]=s.id,e[83]=s.is_voided,e[84]=s.status,e[85]=Vt):Vt=e[85];let Ma;e[86]===Symbol.for("react.memo_cache_sentinel")?(Ma=t.jsx(x,{className:"hidden sm:flex",variant:"outline",asChild:!0,children:t.jsxs(Hl,{href:"/my-pautang",children:[t.jsx(rn,{className:"mr-2 h-4 w-4"}),"Back to List"]})}),e[86]=Ma):Ma=e[86];let Ut;e[87]!==zt||e[88]!==Vt?(Ut=t.jsxs("div",{className:"flex flex-col items-start justify-between gap-4 sm:flex-row sm:items-center sm:gap-0",children:[Fa,t.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:flex-nowrap",children:[zt,Vt,Ma]})]}),e[87]=zt,e[88]=Vt,e[89]=Ut):Ut=e[89];let Gt;e[90]!==s.is_voided||e[91]!==s.void_reason||e[92]!==s.voided_at?(Gt=s.is_voided?t.jsxs(Gl,{variant:"destructive",className:"py-3",children:[t.jsx(Kl,{className:"h-4 w-4"}),t.jsxs(Ql,{className:"ml-2",children:[t.jsx("span",{className:"font-semibold",children:"This order has been voided"})," ","on"," ",s.voided_at?v(s.voided_at):"N/A",s.void_reason&&` - ${s.void_reason}`]})]}):"",e[90]=s.is_voided,e[91]=s.void_reason,e[92]=s.voided_at,e[93]=Gt):Gt=e[93];let Aa;e[94]===Symbol.for("react.memo_cache_sentinel")?(Aa=t.jsx(Fs,{children:t.jsxs(Ms,{className:"flex items-center gap-2",children:[t.jsx(Yl,{className:"h-5 w-5"}),"Borrower Information"]})}),e[94]=Aa):Aa=e[94];let Ta;e[95]===Symbol.for("react.memo_cache_sentinel")?(Ta=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Name"}),e[95]=Ta):Ta=e[95];const Sl=s.borrower?.full_name;let Qt;e[96]!==Sl?(Qt=t.jsxs("div",{children:[Ta,t.jsx("p",{className:"font-medium",children:Sl})]}),e[96]=Sl,e[97]=Qt):Qt=e[97];let La;e[98]===Symbol.for("react.memo_cache_sentinel")?(La=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Address"}),e[98]=La):La=e[98];const Pl=s.borrower?.address??"N/A";let Xt;e[99]!==Pl?(Xt=t.jsxs("div",{children:[La,t.jsx("p",{className:"font-medium",children:Pl})]}),e[99]=Pl,e[100]=Xt):Xt=e[100];let qa;e[101]===Symbol.for("react.memo_cache_sentinel")?(qa=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Phone Number"}),e[101]=qa):qa=e[101];const Cl=s.borrower?.contact_number??"N/A";let Wt;e[102]!==Cl?(Wt=t.jsxs("div",{children:[qa,t.jsx("p",{className:"font-medium",children:Cl})]}),e[102]=Cl,e[103]=Wt):Wt=e[103];let Jt;e[104]!==Qt||e[105]!==Xt||e[106]!==Wt?(Jt=t.jsxs(L,{children:[Aa,t.jsxs(q,{className:"space-y-3",children:[Qt,Xt,Wt]})]}),e[104]=Qt,e[105]=Xt,e[106]=Wt,e[107]=Jt):Jt=e[107];let Ia;e[108]===Symbol.for("react.memo_cache_sentinel")?(Ia=t.jsx(Fs,{children:t.jsxs(Ms,{className:"flex items-center gap-2",children:[t.jsx(Zl,{className:"h-5 w-5"}),"Transaction Details"]})}),e[108]=Ia):Ia=e[108];let Ea;e[109]===Symbol.for("react.memo_cache_sentinel")?(Ea=t.jsx("span",{className:"text-sm text-muted-foreground",children:"Loan Number"}),e[109]=Ea):Ea=e[109];let Oa;e[110]===Symbol.for("react.memo_cache_sentinel")?(Oa=t.jsx(un,{className:"h-4 w-4"}),e[110]=Oa):Oa=e[110];let Kt;e[111]!==s.loan_number?(Kt=t.jsxs("div",{className:"flex justify-between",children:[Ea,t.jsxs("span",{className:"flex items-center gap-1 font-medium",children:[Oa,s.loan_number]})]}),e[111]=s.loan_number,e[112]=Kt):Kt=e[112];let $a;e[113]===Symbol.for("react.memo_cache_sentinel")?($a=t.jsx("span",{className:"text-sm text-muted-foreground",children:"Transaction Date"}),e[113]=$a):$a=e[113];let Ha;e[114]===Symbol.for("react.memo_cache_sentinel")?(Ha=t.jsx(en,{className:"h-4 w-4"}),e[114]=Ha):Ha=e[114];let Yt;e[115]!==s.transaction_date?(Yt=t.jsxs("div",{className:"flex justify-between",children:[$a,t.jsxs("span",{className:"flex items-center gap-1 font-medium",children:[Ha,s.transaction_date]})]}),e[115]=s.transaction_date,e[116]=Yt):Yt=e[116];let Ra;e[117]===Symbol.for("react.memo_cache_sentinel")?(Ra=t.jsx("span",{className:"text-sm text-muted-foreground",children:"Status"}),e[117]=Ra):Ra=e[117];let Ba;e[118]===Symbol.for("react.memo_cache_sentinel")?(Ba=t.jsx(hn,{className:"h-4 w-4"}),e[118]=Ba):Ba=e[118];let Zt;e[119]!==s.status?(Zt=t.jsxs("div",{className:"flex justify-between",children:[Ra,t.jsxs("span",{className:"flex items-center gap-1 font-medium",children:[Ba,s.status]})]}),e[119]=s.status,e[120]=Zt):Zt=e[120];let za;e[121]===Symbol.for("react.memo_cache_sentinel")?(za=t.jsx("span",{className:"text-sm text-muted-foreground",children:"Interest Type"}),e[121]=za):za=e[121];let es;e[122]!==s.interest_type?(es=t.jsxs("div",{className:"flex justify-between",children:[za,t.jsx("span",{className:"font-medium",children:s.interest_type})]}),e[122]=s.interest_type,e[123]=es):es=e[123];let Va;e[124]===Symbol.for("react.memo_cache_sentinel")?(Va=t.jsx("span",{className:"text-sm text-muted-foreground",children:"Interest Period"}),e[124]=Va):Va=e[124];let ts;e[125]!==s.frequency?(ts=t.jsxs("div",{className:"flex justify-between",children:[Va,t.jsx("span",{className:"font-medium",children:s.frequency})]}),e[125]=s.frequency,e[126]=ts):ts=e[126];let Ua;e[127]===Symbol.for("react.memo_cache_sentinel")?(Ua=t.jsx("span",{className:"text-sm text-muted-foreground",children:"Loan Duration"}),e[127]=Ua):Ua=e[127];let ss;e[128]!==s.duration?(ss=t.jsxs("div",{className:"flex justify-between",children:[Ua,t.jsx("span",{className:"font-medium",children:s.duration})]}),e[128]=s.duration,e[129]=ss):ss=e[129];let Ga;e[130]===Symbol.for("react.memo_cache_sentinel")?(Ga=t.jsx("span",{className:"text-sm text-muted-foreground",children:"Payment Frequency"}),e[130]=Ga):Ga=e[130];let as;e[131]!==s.payment_frequency?(as=t.jsxs("div",{className:"flex justify-between",children:[Ga,t.jsx("span",{className:"font-medium",children:s.payment_frequency})]}),e[131]=s.payment_frequency,e[132]=as):as=e[132];let ls;e[133]!==Kt||e[134]!==Yt||e[135]!==Zt||e[136]!==es||e[137]!==ts||e[138]!==ss||e[139]!==as?(ls=t.jsxs(L,{children:[Ia,t.jsxs(q,{className:"space-y-3",children:[Kt,Yt,Zt,es,ts,ss,as]})]}),e[133]=Kt,e[134]=Yt,e[135]=Zt,e[136]=es,e[137]=ts,e[138]=ss,e[139]=as,e[140]=ls):ls=e[140];let ns;e[141]!==Jt||e[142]!==ls?(ns=t.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[Jt,ls]}),e[141]=Jt,e[142]=ls,e[143]=ns):ns=e[143];let Qa;e[144]===Symbol.for("react.memo_cache_sentinel")?(Qa=t.jsx(Fs,{children:t.jsxs(Ms,{className:"flex items-center gap-2",children:[t.jsx(tn,{className:"h-5 w-5"}),"Financial Summary"]})}),e[144]=Qa):Qa=e[144];let Xa;e[145]===Symbol.for("react.memo_cache_sentinel")?(Xa=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Principal Amount"}),e[145]=Xa):Xa=e[145];let rs;e[146]!==s.amount?(rs=u(s.amount),e[146]=s.amount,e[147]=rs):rs=e[147];let is;e[148]!==rs?(is=t.jsxs("div",{className:"space-y-1",children:[Xa,t.jsx("p",{className:"text-2xl font-bold",children:rs})]}),e[148]=rs,e[149]=is):is=e[149];let Wa;e[150]===Symbol.for("react.memo_cache_sentinel")?(Wa=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Interest"}),e[150]=Wa):Wa=e[150];let os;e[151]!==s.interest_type||e[152]!==s.interest_value?(os=s.interest_type==="fixed"?u(s.interest_value):`${s.interest_value}%`,e[151]=s.interest_type,e[152]=s.interest_value,e[153]=os):os=e[153];let ms;e[154]!==os?(ms=t.jsxs("div",{className:"space-y-1",children:[Wa,t.jsx("p",{className:"text-2xl font-bold",children:os})]}),e[154]=os,e[155]=ms):ms=e[155];let Ja;e[156]===Symbol.for("react.memo_cache_sentinel")?(Ja=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Amount"}),e[156]=Ja):Ja=e[156];let cs;e[157]!==s.total_amount?(cs=u(s.total_amount),e[157]=s.total_amount,e[158]=cs):cs=e[158];let ds;e[159]!==cs?(ds=t.jsxs("div",{className:"space-y-1",children:[Ja,t.jsx("p",{className:"text-2xl font-bold",children:cs})]}),e[159]=cs,e[160]=ds):ds=e[160];let Ka;e[161]===Symbol.for("react.memo_cache_sentinel")?(Ka=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Remaining Balance"}),e[161]=Ka):Ka=e[161];let ps;e[162]!==s.remaining_balance?(ps=u(s.remaining_balance),e[162]=s.remaining_balance,e[163]=ps):ps=e[163];let us;e[164]!==ps?(us=t.jsxs("div",{className:"space-y-1",children:[Ka,t.jsx("p",{className:"text-2xl font-bold text-orange-600",children:ps})]}),e[164]=ps,e[165]=us):us=e[165];let Ya;e[166]===Symbol.for("react.memo_cache_sentinel")?(Ya=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Penalties"}),e[166]=Ya):Ya=e[166];let xs;e[167]!==s.total_penalties?(xs=u(s.total_penalties),e[167]=s.total_penalties,e[168]=xs):xs=e[168];let fs;e[169]!==xs?(fs=t.jsxs("div",{className:"space-y-1",children:[Ya,t.jsx("p",{className:"text-2xl font-bold",children:xs})]}),e[169]=xs,e[170]=fs):fs=e[170];let hs;e[171]!==is||e[172]!==ms||e[173]!==ds||e[174]!==us||e[175]!==fs?(hs=t.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[is,ms,ds,us,fs]}),e[171]=is,e[172]=ms,e[173]=ds,e[174]=us,e[175]=fs,e[176]=hs):hs=e[176];let Za;e[177]===Symbol.for("react.memo_cache_sentinel")?(Za=t.jsx(Fl,{className:"my-4"}),e[177]=Za):Za=e[177];let el;e[178]===Symbol.for("react.memo_cache_sentinel")?(el=t.jsx("span",{className:"text-muted-foreground",children:"Payment Progress"}),e[178]=el):el=e[178];const kl=u(i);let ys;e[179]!==s.total_amount?(ys=u(s.total_amount),e[179]=s.total_amount,e[180]=ys):ys=e[180];let _s;e[181]!==kl||e[182]!==ys?(_s=t.jsxs("div",{className:"flex justify-between text-sm",children:[el,t.jsxs("span",{className:"font-medium",children:[kl," of"," ",ys]})]}),e[181]=kl,e[182]=ys,e[183]=_s):_s=e[183];const Dl=`${Math.min(ja,100)}%`;let js;e[184]!==Dl?(js=t.jsx("div",{className:"h-3 w-full rounded-full bg-gray-200",children:t.jsx("div",{className:"h-3 rounded-full bg-primary transition-all",style:{width:Dl}})}),e[184]=Dl,e[185]=js):js=e[185];let bs;e[186]!==ja?(bs=ja.toFixed(1),e[186]=ja,e[187]=bs):bs=e[187];let gs;e[188]!==bs?(gs=t.jsxs("p",{className:"text-right text-xs text-muted-foreground",children:[bs,"% completed"]}),e[188]=bs,e[189]=gs):gs=e[189];let Ns;e[190]!==_s||e[191]!==js||e[192]!==gs?(Ns=t.jsxs("div",{className:"space-y-2",children:[_s,js,gs]}),e[190]=_s,e[191]=js,e[192]=gs,e[193]=Ns):Ns=e[193];let vs;e[194]!==hs||e[195]!==Ns?(vs=t.jsxs(L,{children:[Qa,t.jsxs(q,{children:[hs,Za,Ns]})]}),e[194]=hs,e[195]=Ns,e[196]=vs):vs=e[196];let tl;e[197]===Symbol.for("react.memo_cache_sentinel")?(tl=t.jsx(Fs,{children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{children:[t.jsxs(Ms,{className:"flex items-center gap-2",children:[t.jsx(sn,{className:"h-5 w-5"}),"Payment Schedule"]}),t.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:"Complete payment history and schedule. Click on a row to add/edit penalty."})]})})}),e[197]=tl):tl=e[197];let ws;e[198]!==Bt||e[199]!==Rt||e[200]!==s.payment_schedules?(ws=s.payment_schedules?.map((a,c)=>{const h=a.payment_histories?.reduce(vn,0)||0,Ts=parseFloat(a.total_due)-h,A=a.payment_histories?.[a.payment_histories.length-1]?.payment_date,Ds=a.status.toLowerCase()==="paid",al=a.penalty_amount&&parseFloat(a.penalty_amount)>0,Al=new Date().toISOString().split("T")[0]>a.due_date&&a.status.toLowerCase()==="pending";return t.jsxs(Bl,{value:`schedule-${a.id}`,className:`border-b last:border-b-0 ${Al?"border-l-4 border-red-500":""}`,children:[t.jsx(zl,{className:`px-3 py-3 ${Ds?"opacity-60":"hover:bg-muted/50"}`,children:t.jsxs("div",{className:"flex w-full items-center justify-between gap-3",children:[t.jsx("div",{className:"min-w-0",children:t.jsxs("p",{className:"truncate text-sm font-medium",children:["#",c+1," ","•"," ",v(a.due_date)]})}),t.jsxs("div",{className:"flex shrink-0 items-center gap-3",children:[t.jsx("span",{className:"text-sm font-bold text-orange-600",children:u(Ts)}),t.jsx("div",{className:"shrink-0",children:As(Al?"overdue":a.status)})]})]})}),t.jsx(Vl,{children:t.jsxs("div",{className:"rounded bg-muted/10 p-3",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-muted-foreground",children:[t.jsx("div",{className:"",children:"Amount Paid"}),t.jsx("div",{className:"text-right font-medium",children:h>0?u(h):"-"}),t.jsx("div",{children:"Penalty"}),t.jsx("div",{className:"text-right font-medium",children:a.penalty_amount?u(parseFloat(a.penalty_amount)):"-"}),t.jsx("div",{children:"Payment Date"}),t.jsx("div",{className:"text-right font-medium",children:A?v(A):"-"})]}),t.jsx(Fl,{className:"my-3"}),t.jsxs("div",{className:"flex flex-col gap-2",children:[!Ds&&t.jsx(x,{className:"w-full",size:"sm",variant:"outline",onClick:()=>Bt(a),children:"Pay"}),!Ds&&t.jsx(x,{className:"w-full",size:"sm",variant:al?"default":"destructive",onClick:()=>Rt(a),children:al?"Edit Penalty":"Add Penalty"})]})]})})]},a.id)}),e[198]=Bt,e[199]=Rt,e[200]=s.payment_schedules,e[201]=ws):ws=e[201];let Ss;e[202]!==ws?(Ss=t.jsx("div",{className:"p-2 sm:hidden",children:t.jsx(Ul,{type:"single",collapsible:!0,children:ws})}),e[202]=ws,e[203]=Ss):Ss=e[203];let sl;e[204]===Symbol.for("react.memo_cache_sentinel")?(sl=t.jsx("thead",{className:"border-b bg-muted/50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"#"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Due Date"}),t.jsx("th",{className:"hidden px-4 py-3 text-right text-sm font-semibold sm:table-cell",children:"Amount Due"}),t.jsx("th",{className:"hidden px-4 py-3 text-right text-sm font-semibold sm:table-cell",children:"Amount Paid"}),t.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:"Remaining"}),t.jsx("th",{className:"hidden px-4 py-3 text-right text-sm font-semibold sm:table-cell",children:"Penalty"}),t.jsx("th",{className:"hidden px-4 py-3 text-center text-sm font-semibold sm:table-cell",children:"Payment Date"}),t.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Status"})]})}),e[204]=sl):sl=e[204];let Ps;e[205]!==Rt||e[206]!==s.payment_schedules?(Ps=s.payment_schedules?.map((a,c)=>{const h=a.payment_histories?.reduce(Nn,0)||0,Ts=parseFloat(a.total_due)-h,A=a.payment_histories?.[a.payment_histories.length-1]?.payment_date,Ds=a.status.toLowerCase()==="paid",al=a.penalty_amount&&parseFloat(a.penalty_amount)>0;return t.jsxs("tr",{onClick:()=>Rt(a),className:`transition-colors ${Ds?"cursor-not-allowed opacity-60":"cursor-pointer hover:bg-muted/50"}`,children:[t.jsxs("td",{className:"px-4 py-4 text-sm font-medium",children:["#",c+1]}),t.jsx("td",{className:"px-4 py-4 text-sm",children:v(a.due_date)}),t.jsx("td",{className:"hidden px-4 py-4 text-right text-sm font-medium sm:table-cell",children:u(parseFloat(a.total_due))}),t.jsx("td",{className:"hidden px-4 py-4 text-right text-sm sm:table-cell",children:h>0?u(h):"-"}),t.jsx("td",{className:"px-4 py-4 text-right text-sm font-medium text-orange-600",children:u(Ts)}),t.jsx("td",{className:"hidden px-4 py-4 text-right sm:table-cell",children:t.jsxs("div",{className:"flex items-center justify-end gap-1",children:[t.jsx("span",{className:"text-sm font-medium text-red-600",children:a.penalty_amount?u(parseFloat(a.penalty_amount)):"-"}),al&&!Ds&&t.jsx(dl,{className:"h-3 w-3 text-muted-foreground"})]})}),t.jsx("td",{className:"hidden px-4 py-4 text-center text-sm sm:table-cell",children:A?v(A):"-"}),t.jsx("td",{className:"px-4 py-4 text-center",children:new Date().toISOString().split("T")[0]>a.due_date&&a.status.toLowerCase()==="pending"?As("overdue"):As(a.status)})]},a.id)}),e[205]=Rt,e[206]=s.payment_schedules,e[207]=Ps):Ps=e[207];let Cs;e[208]!==Ps?(Cs=t.jsx("div",{className:"hidden sm:block sm:overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm sm:text-base",children:[sl,t.jsx("tbody",{className:"divide-y",children:Ps})]})}),e[208]=Ps,e[209]=Cs):Cs=e[209];let ks;e[210]!==Ss||e[211]!==Cs?(ks=t.jsxs(L,{children:[tl,t.jsxs(q,{className:"p-0",children:[Ss,Cs]})]}),e[210]=Ss,e[211]=Cs,e[212]=ks):ks=e[212],e[213]!==Ut||e[214]!==Gt||e[215]!==ns||e[216]!==vs||e[217]!==ks?(D=t.jsxs("div",{className:"space-y-6 lg:col-span-2",children:[Ut,Gt,ns,vs,ks]}),e[213]=Ut,e[214]=Gt,e[215]=ns,e[216]=vs,e[217]=ks,e[218]=D):D=e[218],X="space-y-6",e[219]!==Bt||e[220]!==s.is_voided||e[221]!==s.payment_schedules?(k=s.is_voided?t.jsx(L,{children:t.jsxs(q,{className:"pt-6 text-center",children:[t.jsx(cn,{className:"mx-auto mb-4 h-16 w-16 text-muted-foreground"}),t.jsx("h3",{className:"mb-2 text-xl font-bold",children:"No Payments Available"}),t.jsx("p",{className:"text-muted-foreground",children:"This order cannot accept payments."})]})}):t.jsxs(L,{children:[t.jsx(Fs,{children:t.jsxs(Ms,{className:"flex items-center gap-2",children:[t.jsx(ql,{className:"h-5 w-5"}),"Record Payment"]})}),t.jsx(q,{className:"space-y-4",children:t.jsxs("div",{className:"space-y-3",children:[t.jsx(f,{children:"Select Payment Schedule"}),t.jsxs("div",{className:"space-y-2",children:[s.payment_schedules?.filter(gn).map((a,c)=>{const h=a.payment_histories?.reduce(bn,0)||0,Ts=parseFloat(a.total_due)-h;return t.jsxs(x,{variant:"outline",className:"h-auto w-full cursor-pointer justify-between py-3",onClick:()=>Bt(a),children:[t.jsxs("div",{className:"flex flex-col items-start gap-1",children:[t.jsxs("span",{className:"text-sm font-medium",children:["Payment #",s.payment_schedules.findIndex(A=>A.id===a.id)+1]}),t.jsxs("span",{className:"text-xs text-muted-foreground",children:["Due:"," ",v(a.due_date)]})]}),t.jsxs("div",{className:"flex flex-col items-end gap-1",children:[t.jsx("span",{className:"text-sm font-bold text-orange-600",children:u(Ts)}),As(a.status)]})]},a.id)}),!s.payment_schedules?.some(jn)&&t.jsx("p",{className:"py-4 text-center text-sm text-muted-foreground",children:"All payments completed"})]})]})})]}),e[219]=Bt,e[220]=s.is_voided,e[221]=s.payment_schedules,e[222]=k):k=e[222],$=L,e[223]===Symbol.for("react.memo_cache_sentinel")?(C=t.jsx(Fs,{children:t.jsxs(Ms,{className:"flex items-center gap-2",children:[t.jsx(an,{className:"h-5 w-5"}),"Payment History"]})}),e[223]=C):C=e[223],O=q,Y="max-h-[600px] space-y-3 overflow-y-auto",Z=Ml.length>0?Ml.map((a,c)=>t.jsxs("div",{className:"space-y-2 rounded-lg border p-3 transition-colors hover:border-primary",children:[t.jsxs("div",{className:"flex min-w-0 items-start justify-between",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsxs("p",{className:"truncate text-sm font-medium",children:["Payment #",a.schedule_number]}),t.jsx("p",{className:"truncate text-xs text-muted-foreground",children:v(a.payment_date)})]}),t.jsxs("div",{className:"flex shrink-0 items-center gap-2",children:[t.jsx("p",{className:"text-sm font-bold text-green-600",children:u(parseFloat(a.amount_paid))}),t.jsx(x,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",onClick:()=>Ol(a),children:t.jsx(dl,{className:"h-3.5 w-3.5"})})]})]}),t.jsx(Fl,{}),t.jsxs("div",{className:"space-y-1 text-xs",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-muted-foreground",children:"Method:"}),t.jsx("span",{className:"font-medium capitalize",children:a.payment_method})]}),a.reference_number&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-muted-foreground",children:"Ref #:"}),t.jsx("span",{className:"font-medium",children:a.reference_number})]}),a.receipt_number&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-muted-foreground",children:"Receipt #:"}),t.jsx("span",{className:"font-medium",children:a.receipt_number})]})]})]},c)):t.jsx("p",{className:"py-8 text-center text-sm text-muted-foreground",children:"No payment history yet"}),e[10]=l,e[11]=p,e[12]=s.amount,e[13]=s.borrower?.address,e[14]=s.borrower?.contact_number,e[15]=s.borrower?.full_name,e[16]=s.duration,e[17]=s.frequency,e[18]=s.id,e[19]=s.interest_type,e[20]=s.interest_value,e[21]=s.is_voided,e[22]=s.loan_number,e[23]=s.payment_frequency,e[24]=s.payment_schedules,e[25]=s.remaining_balance,e[26]=s.status,e[27]=s.total_amount,e[28]=s.total_penalties,e[29]=s.transaction_date,e[30]=s.void_reason,e[31]=s.voided_at,e[32]=n,e[33]=r,e[34]=b,e[35]=O,e[36]=$,e[37]=H,e[38]=R,e[39]=B,e[40]=z,e[41]=V,e[42]=U,e[43]=G,e[44]=Q,e[45]=C,e[46]=X,e[47]=k,e[48]=W,e[49]=D,e[50]=J,e[51]=K,e[52]=F,e[53]=Y,e[54]=Z}else O=e[35],$=e[36],H=e[37],R=e[38],B=e[39],z=e[40],V=e[41],U=e[42],G=e[43],Q=e[44],C=e[45],X=e[46],k=e[47],W=e[48],D=e[49],J=e[50],K=e[51],F=e[52],Y=e[53],Z=e[54];let ee;e[224]!==Y||e[225]!==Z?(ee=t.jsx("div",{className:Y,children:Z}),e[224]=Y,e[225]=Z,e[226]=ee):ee=e[226];let te;e[227]!==O||e[228]!==ee?(te=t.jsx(O,{children:ee}),e[227]=O,e[228]=ee,e[229]=te):te=e[229];let se;e[230]!==$||e[231]!==C||e[232]!==te?(se=t.jsxs($,{children:[C,te]}),e[230]=$,e[231]=C,e[232]=te,e[233]=se):se=e[233];let ae;e[234]!==X||e[235]!==k||e[236]!==se?(ae=t.jsxs("div",{className:X,children:[k,se]}),e[234]=X,e[235]=k,e[236]=se,e[237]=ae):ae=e[237];let le;e[238]!==W||e[239]!==D||e[240]!==ae?(le=t.jsxs("div",{className:W,children:[D,ae]}),e[238]=W,e[239]=D,e[240]=ae,e[241]=le):le=e[241];let ne;e[242]!==J||e[243]!==le?(ne=t.jsx("div",{className:J,children:le}),e[242]=J,e[243]=le,e[244]=ne):ne=e[244];let zs;e[245]===Symbol.for("react.memo_cache_sentinel")?(zs=t.jsxs(nl,{children:[t.jsxs(rl,{className:"flex items-center gap-2",children:[t.jsx(Ll,{className:"h-5 w-5 text-red-600"}),"Void Loan"]}),t.jsx(il,{children:"Are you sure you want to void this loan? This action cannot be undone."})]}),e[245]=zs):zs=e[245];let Vs;e[246]===Symbol.for("react.memo_cache_sentinel")?(Vs=t.jsxs("div",{className:"rounded-md bg-red-50 p-3 text-sm text-red-800",children:[t.jsx("p",{className:"font-medium",children:"Warning!"}),t.jsx("p",{children:"Voiding this loan will permanently mark it as cancelled."})]}),e[246]=Vs):Vs=e[246];let Us;e[247]===Symbol.for("react.memo_cache_sentinel")?(Us=t.jsx(f,{htmlFor:"void_reason",children:"Reason for Voiding *"}),e[247]=Us):Us=e[247];let re;e[248]!==m?(re=i=>m.setData("void_reason",i.target.value),e[248]=m,e[249]=re):re=e[249];let ie;e[250]!==re||e[251]!==m.data.void_reason?(ie=t.jsx(Tl,{id:"void_reason",placeholder:"Please provide a reason for voiding this loan...",className:"min-h-[100px]",value:m.data.void_reason,onChange:re,required:!0}),e[250]=re,e[251]=m.data.void_reason,e[252]=ie):ie=e[252];let oe;e[253]!==m.errors.void_reason?(oe=m.errors.void_reason&&t.jsx("p",{className:"text-sm text-red-500",children:m.errors.void_reason}),e[253]=m.errors.void_reason,e[254]=oe):oe=e[254];let me;e[255]!==ie||e[256]!==oe?(me=t.jsxs("div",{className:"space-y-4 py-4",children:[Vs,t.jsxs("div",{className:"space-y-2",children:[Us,ie,oe]})]}),e[255]=ie,e[256]=oe,e[257]=me):me=e[257];let ce;e[258]!==xl||e[259]!==m.processing?(ce=t.jsx(x,{type:"button",variant:"outline",onClick:xl,disabled:m.processing,children:"Cancel"}),e[258]=xl,e[259]=m.processing,e[260]=ce):ce=e[260];const fl=m.processing?"Voiding...":"Void Loan";let de;e[261]!==fl||e[262]!==m.processing?(de=t.jsx(x,{type:"submit",variant:"destructive",disabled:m.processing,children:fl}),e[261]=fl,e[262]=m.processing,e[263]=de):de=e[263];let pe;e[264]!==ce||e[265]!==de?(pe=t.jsxs(ol,{children:[ce,de]}),e[264]=ce,e[265]=de,e[266]=pe):pe=e[266];let ue;e[267]!==ul||e[268]!==me||e[269]!==pe?(ue=t.jsx(ml,{className:"sm:max-w-[500px]",children:t.jsxs("form",{onSubmit:ul,children:[zs,me,pe]})}),e[267]=ul,e[268]=me,e[269]=pe,e[270]=ue):ue=e[270];let xe;e[271]!==P||e[272]!==ue?(xe=t.jsx(cl,{open:P,onOpenChange:Ls,children:ue}),e[271]=P,e[272]=ue,e[273]=xe):xe=e[273];let fe;e[274]!==p?(fe=t.jsx(rl,{className:"flex items-center gap-2",children:p?t.jsxs(t.Fragment,{children:[t.jsx(dl,{className:"h-5 w-5 text-orange-600"}),"Edit Penalty"]}):t.jsxs(t.Fragment,{children:[t.jsx(Rl,{className:"h-5 w-5 text-red-600"}),"Add Penalty"]})}),e[274]=p,e[275]=fe):fe=e[275];const hl=p?"Update the":"Add a";let he;e[276]!==s.payment_schedules||e[277]!==d?(he=d&&s.payment_schedules?.findIndex(i=>i.id===d.id)+1,e[276]=s.payment_schedules,e[277]=d,e[278]=he):he=e[278];let ye;e[279]!==d?(ye=d&&t.jsxs("span",{className:"ml-1 font-medium",children:["(Due:"," ",v(d.due_date),")"]}),e[279]=d,e[280]=ye):ye=e[280];let _e;e[281]!==hl||e[282]!==he||e[283]!==ye?(_e=t.jsxs(il,{children:[hl," penalty for payment #"," ",he,ye]}),e[281]=hl,e[282]=he,e[283]=ye,e[284]=_e):_e=e[284];let je;e[285]!==fe||e[286]!==_e?(je=t.jsxs(nl,{children:[fe,_e]}),e[285]=fe,e[286]=_e,e[287]=je):je=e[287];let be;e[288]!==p||e[289]!==d?.penalty_amount?(be=p&&t.jsxs("div",{className:"rounded-md bg-orange-50 p-3 text-sm text-orange-800",children:[t.jsx("p",{className:"font-medium",children:"Current Penalty:"}),t.jsx("p",{className:"text-lg font-bold",children:u(parseFloat(d?.penalty_amount||0))})]}),e[288]=p,e[289]=d?.penalty_amount,e[290]=be):be=e[290];const yl=p?"New Penalty Amount *":"Penalty Amount *";let ge;e[291]!==yl?(ge=t.jsx(f,{htmlFor:"penalty_amount",children:yl}),e[291]=yl,e[292]=ge):ge=e[292];let Gs;e[293]===Symbol.for("react.memo_cache_sentinel")?(Gs=t.jsx("span",{className:"absolute top-2.5 left-3 text-sm text-muted-foreground",children:"₱"}),e[293]=Gs):Gs=e[293];let Ne;e[294]!==r?(Ne=i=>r.setData("penalty_amount",i.target.value),e[294]=r,e[295]=Ne):Ne=e[295];let ve;e[296]!==r.data.penalty_amount||e[297]!==Ne?(ve=t.jsxs("div",{className:"relative",children:[Gs,t.jsx(w,{id:"penalty_amount",type:"number",step:"0.01",placeholder:"0.00",className:"pl-7",value:r.data.penalty_amount,onChange:Ne,required:!0})]}),e[296]=r.data.penalty_amount,e[297]=Ne,e[298]=ve):ve=e[298];let we;e[299]!==r.errors.penalty_amount?(we=r.errors.penalty_amount&&t.jsx("p",{className:"text-sm text-red-500",children:r.errors.penalty_amount}),e[299]=r.errors.penalty_amount,e[300]=we):we=e[300];let Se;e[301]!==ge||e[302]!==ve||e[303]!==we?(Se=t.jsxs("div",{className:"space-y-2",children:[ge,ve,we]}),e[301]=ge,e[302]=ve,e[303]=we,e[304]=Se):Se=e[304];let Qs;e[305]===Symbol.for("react.memo_cache_sentinel")?(Qs=t.jsx(f,{htmlFor:"remarks",children:"Remarks (Optional)"}),e[305]=Qs):Qs=e[305];const _l=p?"Add any notes about this penalty update...":"Add any notes or remarks about this penalty...";let Pe;e[306]!==r?(Pe=i=>r.setData("remarks",i.target.value),e[306]=r,e[307]=Pe):Pe=e[307];let Ce;e[308]!==r.data.remarks||e[309]!==_l||e[310]!==Pe?(Ce=t.jsx(Tl,{id:"remarks",placeholder:_l,className:"min-h-[100px]",value:r.data.remarks,onChange:Pe}),e[308]=r.data.remarks,e[309]=_l,e[310]=Pe,e[311]=Ce):Ce=e[311];let ke;e[312]!==r.errors.remarks?(ke=r.errors.remarks&&t.jsx("p",{className:"text-sm text-red-500",children:r.errors.remarks}),e[312]=r.errors.remarks,e[313]=ke):ke=e[313];let De;e[314]!==Ce||e[315]!==ke?(De=t.jsxs("div",{className:"space-y-2",children:[Qs,Ce,ke]}),e[314]=Ce,e[315]=ke,e[316]=De):De=e[316];let Fe;e[317]!==be||e[318]!==Se||e[319]!==De?(Fe=t.jsxs("div",{className:"space-y-4 py-4",children:[be,Se,De]}),e[317]=be,e[318]=Se,e[319]=De,e[320]=Fe):Fe=e[320];let Me;e[321]!==z||e[322]!==r.processing?(Me=t.jsx(x,{type:"button",variant:"outline",onClick:z,disabled:r.processing,children:"Cancel"}),e[321]=z,e[322]=r.processing,e[323]=Me):Me=e[323];const jl=p?"default":"destructive",bl=r.processing?p?"Updating...":"Adding...":p?"Update Penalty":"Add Penalty";let Ae;e[324]!==r.processing||e[325]!==jl||e[326]!==bl?(Ae=t.jsx(x,{type:"submit",disabled:r.processing,variant:jl,children:bl}),e[324]=r.processing,e[325]=jl,e[326]=bl,e[327]=Ae):Ae=e[327];let Te;e[328]!==Me||e[329]!==Ae?(Te=t.jsxs(ol,{children:[Me,Ae]}),e[328]=Me,e[329]=Ae,e[330]=Te):Te=e[330];let Le;e[331]!==Q||e[332]!==je||e[333]!==Fe||e[334]!==Te?(Le=t.jsx(ml,{className:"sm:max-w-[500px]",children:t.jsxs("form",{onSubmit:Q,children:[je,Fe,Te]})}),e[331]=Q,e[332]=je,e[333]=Fe,e[334]=Te,e[335]=Le):Le=e[335];let qe;e[336]!==M||e[337]!==Le?(qe=t.jsx(cl,{open:M,onOpenChange:S,children:Le}),e[336]=M,e[337]=Le,e[338]=qe):qe=e[338];let Xs;e[339]===Symbol.for("react.memo_cache_sentinel")?(Xs=t.jsxs(rl,{className:"flex items-center gap-2",children:[t.jsx(ql,{className:"h-5 w-5"}),"Record Payment"]}),e[339]=Xs):Xs=e[339];let Ie;e[340]!==s.payment_schedules||e[341]!==d?(Ie=d&&s.payment_schedules?.findIndex(i=>i.id===d.id)+1,e[340]=s.payment_schedules,e[341]=d,e[342]=Ie):Ie=e[342];let Ee;e[343]!==d?(Ee=d&&t.jsxs("span",{className:"ml-1 font-medium",children:["(Due:"," ",v(d.due_date),")"]}),e[343]=d,e[344]=Ee):Ee=e[344];let Oe;e[345]!==Ie||e[346]!==Ee?(Oe=t.jsxs(nl,{children:[Xs,t.jsxs(il,{children:["Record payment for Payment #",Ie,Ee]})]}),e[345]=Ie,e[346]=Ee,e[347]=Oe):Oe=e[347];let Ws;e[348]===Symbol.for("react.memo_cache_sentinel")?(Ws=t.jsx(f,{htmlFor:"amount_paid",children:"Amount Paid *"}),e[348]=Ws):Ws=e[348];let Js;e[349]===Symbol.for("react.memo_cache_sentinel")?(Js=t.jsx("span",{className:"absolute top-2.5 left-3 text-sm text-muted-foreground",children:"₱"}),e[349]=Js):Js=e[349];let $e;e[350]!==n?($e=i=>n.setData("amount_paid",i.target.value),e[350]=n,e[351]=$e):$e=e[351];let He;e[352]!==n.data.amount_paid||e[353]!==$e?(He=t.jsxs("div",{className:"relative",children:[Js,t.jsx(w,{id:"amount_paid",type:"number",step:"0.01",placeholder:"0.00",className:"pl-7",value:n.data.amount_paid,onChange:$e,required:!0})]}),e[352]=n.data.amount_paid,e[353]=$e,e[354]=He):He=e[354];let Re;e[355]!==n.errors.amount_paid?(Re=n.errors.amount_paid&&t.jsx("p",{className:"text-sm text-red-500",children:n.errors.amount_paid}),e[355]=n.errors.amount_paid,e[356]=Re):Re=e[356];let Be;e[357]!==He||e[358]!==Re?(Be=t.jsxs("div",{className:"space-y-2",children:[Ws,He,Re]}),e[357]=He,e[358]=Re,e[359]=Be):Be=e[359];let Ks;e[360]===Symbol.for("react.memo_cache_sentinel")?(Ks=t.jsx(f,{htmlFor:"payment_method",children:"Payment Method *"}),e[360]=Ks):Ks=e[360];let ze;e[361]!==n?(ze=i=>n.setData("payment_method",i.target.value),e[361]=n,e[362]=ze):ze=e[362];let Ys,Zs,ea,ta,sa;e[363]===Symbol.for("react.memo_cache_sentinel")?(Ys=t.jsx("option",{value:"cash",children:"Cash"}),Zs=t.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),ea=t.jsx("option",{value:"gcash",children:"GCash"}),ta=t.jsx("option",{value:"paymaya",children:"PayMaya"}),sa=t.jsx("option",{value:"check",children:"Check"}),e[363]=Ys,e[364]=Zs,e[365]=ea,e[366]=ta,e[367]=sa):(Ys=e[363],Zs=e[364],ea=e[365],ta=e[366],sa=e[367]);let Ve;e[368]!==n.data.payment_method||e[369]!==ze?(Ve=t.jsxs("select",{id:"payment_method",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:outline-none",value:n.data.payment_method,onChange:ze,required:!0,children:[Ys,Zs,ea,ta,sa]}),e[368]=n.data.payment_method,e[369]=ze,e[370]=Ve):Ve=e[370];let Ue;e[371]!==n.errors.payment_method?(Ue=n.errors.payment_method&&t.jsx("p",{className:"text-sm text-red-500",children:n.errors.payment_method}),e[371]=n.errors.payment_method,e[372]=Ue):Ue=e[372];let Ge;e[373]!==Ve||e[374]!==Ue?(Ge=t.jsxs("div",{className:"space-y-2",children:[Ks,Ve,Ue]}),e[373]=Ve,e[374]=Ue,e[375]=Ge):Ge=e[375];let aa;e[376]===Symbol.for("react.memo_cache_sentinel")?(aa=t.jsx(f,{htmlFor:"payment_date",children:"Payment Date *"}),e[376]=aa):aa=e[376];let Qe;e[377]!==n?(Qe=i=>n.setData("payment_date",i.target.value),e[377]=n,e[378]=Qe):Qe=e[378];let Xe;e[379]!==n.data.payment_date||e[380]!==Qe?(Xe=t.jsx(w,{id:"payment_date",type:"date",value:n.data.payment_date,onChange:Qe,required:!0}),e[379]=n.data.payment_date,e[380]=Qe,e[381]=Xe):Xe=e[381];let We;e[382]!==n.errors.payment_date?(We=n.errors.payment_date&&t.jsx("p",{className:"text-sm text-red-500",children:n.errors.payment_date}),e[382]=n.errors.payment_date,e[383]=We):We=e[383];let Je;e[384]!==Xe||e[385]!==We?(Je=t.jsxs("div",{className:"space-y-2",children:[aa,Xe,We]}),e[384]=Xe,e[385]=We,e[386]=Je):Je=e[386];let la;e[387]===Symbol.for("react.memo_cache_sentinel")?(la=t.jsx(f,{htmlFor:"reference_number",children:"Reference Number"}),e[387]=la):la=e[387];let Ke;e[388]!==n?(Ke=i=>n.setData("reference_number",i.target.value),e[388]=n,e[389]=Ke):Ke=e[389];let Ye;e[390]!==n.data.reference_number||e[391]!==Ke?(Ye=t.jsx(w,{id:"reference_number",type:"text",placeholder:"Enter reference number",value:n.data.reference_number,onChange:Ke}),e[390]=n.data.reference_number,e[391]=Ke,e[392]=Ye):Ye=e[392];let Ze;e[393]!==n.errors.reference_number?(Ze=n.errors.reference_number&&t.jsx("p",{className:"text-sm text-red-500",children:n.errors.reference_number}),e[393]=n.errors.reference_number,e[394]=Ze):Ze=e[394];let et;e[395]!==Ye||e[396]!==Ze?(et=t.jsxs("div",{className:"space-y-2",children:[la,Ye,Ze]}),e[395]=Ye,e[396]=Ze,e[397]=et):et=e[397];let na;e[398]===Symbol.for("react.memo_cache_sentinel")?(na=t.jsx(f,{htmlFor:"receipt_number",children:"Receipt Number"}),e[398]=na):na=e[398];let tt;e[399]!==n?(tt=i=>n.setData("receipt_number",i.target.value),e[399]=n,e[400]=tt):tt=e[400];let st;e[401]!==n.data.receipt_number||e[402]!==tt?(st=t.jsx(w,{id:"receipt_number",type:"text",placeholder:"Enter receipt number",value:n.data.receipt_number,onChange:tt}),e[401]=n.data.receipt_number,e[402]=tt,e[403]=st):st=e[403];let at;e[404]!==n.errors.receipt_number?(at=n.errors.receipt_number&&t.jsx("p",{className:"text-sm text-red-500",children:n.errors.receipt_number}),e[404]=n.errors.receipt_number,e[405]=at):at=e[405];let lt;e[406]!==st||e[407]!==at?(lt=t.jsxs("div",{className:"space-y-2",children:[na,st,at]}),e[406]=st,e[407]=at,e[408]=lt):lt=e[408];let nt;e[409]!==Be||e[410]!==Ge||e[411]!==Je||e[412]!==et||e[413]!==lt?(nt=t.jsxs("div",{className:"space-y-4 py-4",children:[Be,Ge,Je,et,lt]}),e[409]=Be,e[410]=Ge,e[411]=Je,e[412]=et,e[413]=lt,e[414]=nt):nt=e[414];let rt;e[415]!==B||e[416]!==n.processing?(rt=t.jsx(x,{type:"button",variant:"outline",onClick:B,disabled:n.processing,children:"Cancel"}),e[415]=B,e[416]=n.processing,e[417]=rt):rt=e[417];const gl=n.processing?"Recording...":"Record Payment";let it;e[418]!==n.processing||e[419]!==gl?(it=t.jsx(x,{type:"submit",disabled:n.processing,children:gl}),e[418]=n.processing,e[419]=gl,e[420]=it):it=e[420];let ot;e[421]!==rt||e[422]!==it?(ot=t.jsxs(ol,{children:[rt,it]}),e[421]=rt,e[422]=it,e[423]=ot):ot=e[423];let mt;e[424]!==G||e[425]!==nt||e[426]!==ot||e[427]!==Oe?(mt=t.jsx(ml,{className:"sm:max-w-[500px]",children:t.jsxs("form",{onSubmit:G,children:[Oe,nt,ot]})}),e[424]=G,e[425]=nt,e[426]=ot,e[427]=Oe,e[428]=mt):mt=e[428];let ct;e[429]!==g||e[430]!==mt?(ct=t.jsx(cl,{open:g,onOpenChange:j,children:mt}),e[429]=g,e[430]=mt,e[431]=ct):ct=e[431];let ra;e[432]===Symbol.for("react.memo_cache_sentinel")?(ra=t.jsxs(rl,{className:"flex items-center gap-2",children:[t.jsx(dl,{className:"h-5 w-5"}),"Edit Payment"]}),e[432]=ra):ra=e[432];const Nl=b?.schedule_number;let dt;e[433]!==Nl?(dt=t.jsxs(nl,{children:[ra,t.jsxs(il,{children:["Edit payment details for Payment #",Nl]})]}),e[433]=Nl,e[434]=dt):dt=e[434];let ia;e[435]===Symbol.for("react.memo_cache_sentinel")?(ia=t.jsx(f,{htmlFor:"edit_amount_paid",children:"Amount Paid *"}),e[435]=ia):ia=e[435];let oa;e[436]===Symbol.for("react.memo_cache_sentinel")?(oa=t.jsx("span",{className:"absolute top-2.5 left-3 text-sm text-muted-foreground",children:"₱"}),e[436]=oa):oa=e[436];let pt;e[437]!==l?(pt=i=>l.setData("amount_paid",i.target.value),e[437]=l,e[438]=pt):pt=e[438];let ut;e[439]!==l.data.amount_paid||e[440]!==pt?(ut=t.jsxs("div",{className:"relative",children:[oa,t.jsx(w,{id:"edit_amount_paid",type:"number",step:"0.01",placeholder:"0.00",className:"pl-7",value:l.data.amount_paid,onChange:pt,required:!0})]}),e[439]=l.data.amount_paid,e[440]=pt,e[441]=ut):ut=e[441];let xt;e[442]!==l.errors.amount_paid?(xt=l.errors.amount_paid&&t.jsx("p",{className:"text-sm text-red-500",children:l.errors.amount_paid}),e[442]=l.errors.amount_paid,e[443]=xt):xt=e[443];let ft;e[444]!==ut||e[445]!==xt?(ft=t.jsxs("div",{className:"space-y-2",children:[ia,ut,xt]}),e[444]=ut,e[445]=xt,e[446]=ft):ft=e[446];let ma;e[447]===Symbol.for("react.memo_cache_sentinel")?(ma=t.jsx(f,{htmlFor:"edit_payment_method",children:"Payment Method *"}),e[447]=ma):ma=e[447];let ht;e[448]!==l?(ht=i=>l.setData("payment_method",i.target.value),e[448]=l,e[449]=ht):ht=e[449];let ca,da,pa,ua,xa;e[450]===Symbol.for("react.memo_cache_sentinel")?(ca=t.jsx("option",{value:"cash",children:"Cash"}),da=t.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),pa=t.jsx("option",{value:"gcash",children:"GCash"}),ua=t.jsx("option",{value:"paymaya",children:"PayMaya"}),xa=t.jsx("option",{value:"check",children:"Check"}),e[450]=ca,e[451]=da,e[452]=pa,e[453]=ua,e[454]=xa):(ca=e[450],da=e[451],pa=e[452],ua=e[453],xa=e[454]);let yt;e[455]!==l.data.payment_method||e[456]!==ht?(yt=t.jsxs("select",{id:"edit_payment_method",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:outline-none",value:l.data.payment_method,onChange:ht,required:!0,children:[ca,da,pa,ua,xa]}),e[455]=l.data.payment_method,e[456]=ht,e[457]=yt):yt=e[457];let _t;e[458]!==l.errors.payment_method?(_t=l.errors.payment_method&&t.jsx("p",{className:"text-sm text-red-500",children:l.errors.payment_method}),e[458]=l.errors.payment_method,e[459]=_t):_t=e[459];let jt;e[460]!==yt||e[461]!==_t?(jt=t.jsxs("div",{className:"space-y-2",children:[ma,yt,_t]}),e[460]=yt,e[461]=_t,e[462]=jt):jt=e[462];let fa;e[463]===Symbol.for("react.memo_cache_sentinel")?(fa=t.jsx(f,{htmlFor:"edit_payment_date",children:"Payment Date *"}),e[463]=fa):fa=e[463];let bt;e[464]!==l?(bt=i=>l.setData("payment_date",i.target.value),e[464]=l,e[465]=bt):bt=e[465];let gt;e[466]!==l.data.payment_date||e[467]!==bt?(gt=t.jsx(w,{id:"edit_payment_date",type:"date",value:l.data.payment_date,onChange:bt,required:!0}),e[466]=l.data.payment_date,e[467]=bt,e[468]=gt):gt=e[468];let Nt;e[469]!==l.errors.payment_date?(Nt=l.errors.payment_date&&t.jsx("p",{className:"text-sm text-red-500",children:l.errors.payment_date}),e[469]=l.errors.payment_date,e[470]=Nt):Nt=e[470];let vt;e[471]!==gt||e[472]!==Nt?(vt=t.jsxs("div",{className:"space-y-2",children:[fa,gt,Nt]}),e[471]=gt,e[472]=Nt,e[473]=vt):vt=e[473];let ha;e[474]===Symbol.for("react.memo_cache_sentinel")?(ha=t.jsx(f,{htmlFor:"edit_reference_number",children:"Reference Number"}),e[474]=ha):ha=e[474];let wt;e[475]!==l?(wt=i=>l.setData("reference_number",i.target.value),e[475]=l,e[476]=wt):wt=e[476];let St;e[477]!==l.data.reference_number||e[478]!==wt?(St=t.jsx(w,{id:"edit_reference_number",type:"text",placeholder:"Enter reference number",value:l.data.reference_number,onChange:wt}),e[477]=l.data.reference_number,e[478]=wt,e[479]=St):St=e[479];let Pt;e[480]!==l.errors.reference_number?(Pt=l.errors.reference_number&&t.jsx("p",{className:"text-sm text-red-500",children:l.errors.reference_number}),e[480]=l.errors.reference_number,e[481]=Pt):Pt=e[481];let Ct;e[482]!==St||e[483]!==Pt?(Ct=t.jsxs("div",{className:"space-y-2",children:[ha,St,Pt]}),e[482]=St,e[483]=Pt,e[484]=Ct):Ct=e[484];let ya;e[485]===Symbol.for("react.memo_cache_sentinel")?(ya=t.jsx(f,{htmlFor:"edit_receipt_number",children:"Receipt Number"}),e[485]=ya):ya=e[485];let kt;e[486]!==l?(kt=i=>l.setData("receipt_number",i.target.value),e[486]=l,e[487]=kt):kt=e[487];let Dt;e[488]!==l.data.receipt_number||e[489]!==kt?(Dt=t.jsx(w,{id:"edit_receipt_number",type:"text",placeholder:"Enter receipt number",value:l.data.receipt_number,onChange:kt}),e[488]=l.data.receipt_number,e[489]=kt,e[490]=Dt):Dt=e[490];let Ft;e[491]!==l.errors.receipt_number?(Ft=l.errors.receipt_number&&t.jsx("p",{className:"text-sm text-red-500",children:l.errors.receipt_number}),e[491]=l.errors.receipt_number,e[492]=Ft):Ft=e[492];let Mt;e[493]!==Dt||e[494]!==Ft?(Mt=t.jsxs("div",{className:"space-y-2",children:[ya,Dt,Ft]}),e[493]=Dt,e[494]=Ft,e[495]=Mt):Mt=e[495];let At;e[496]!==ft||e[497]!==jt||e[498]!==vt||e[499]!==Ct||e[500]!==Mt?(At=t.jsxs("div",{className:"space-y-4 py-4",children:[ft,jt,vt,Ct,Mt]}),e[496]=ft,e[497]=jt,e[498]=vt,e[499]=Ct,e[500]=Mt,e[501]=At):At=e[501];let Tt;e[502]!==V||e[503]!==b?.id?(Tt=()=>V(b?.id),e[502]=V,e[503]=b?.id,e[504]=Tt):Tt=e[504];const vl=l.processing||!b;let Lt;e[505]!==Tt||e[506]!==vl?(Lt=t.jsx(x,{type:"button",variant:"destructive",onClick:Tt,disabled:vl,children:"Delete Payment"}),e[505]=Tt,e[506]=vl,e[507]=Lt):Lt=e[507];let qt;e[508]!==l.processing||e[509]!==R?(qt=t.jsx(x,{type:"button",variant:"outline",onClick:R,disabled:l.processing,children:"Cancel"}),e[508]=l.processing,e[509]=R,e[510]=qt):qt=e[510];const wl=l.processing?"Updating...":"Update Payment";let It;e[511]!==l.processing||e[512]!==wl?(It=t.jsx(x,{type:"submit",disabled:l.processing,children:wl}),e[511]=l.processing,e[512]=wl,e[513]=It):It=e[513];let Et;e[514]!==qt||e[515]!==It?(Et=t.jsxs("div",{className:"flex gap-2",children:[qt,It]}),e[514]=qt,e[515]=It,e[516]=Et):Et=e[516];let Ot;e[517]!==Lt||e[518]!==Et?(Ot=t.jsxs(ol,{className:"gap-2",children:[Lt,Et]}),e[517]=Lt,e[518]=Et,e[519]=Ot):Ot=e[519];let $t;e[520]!==U||e[521]!==dt||e[522]!==At||e[523]!==Ot?($t=t.jsx(ml,{className:"sm:max-w-[500px]",children:t.jsxs("form",{onSubmit:U,children:[dt,At,Ot]})}),e[520]=U,e[521]=dt,e[522]=At,e[523]=Ot,e[524]=$t):$t=e[524];let Ht;e[525]!==N||e[526]!==$t?(Ht=t.jsx(cl,{open:N,onOpenChange:_,children:$t}),e[525]=N,e[526]=$t,e[527]=Ht):Ht=e[527];let _a;return e[528]!==H||e[529]!==ct||e[530]!==Ht||e[531]!==K||e[532]!==F||e[533]!==ne||e[534]!==xe||e[535]!==qe?(_a=t.jsxs(H,{breadcrumbs:K,children:[F,ne,xe,qe,ct,Ht]}),e[528]=H,e[529]=ct,e[530]=Ht,e[531]=K,e[532]=F,e[533]=ne,e[534]=xe,e[535]=qe,e[536]=_a):_a=e[536],_a}function jn(o){return o.status.toLowerCase()!=="paid"}function bn(o,e){return o+parseFloat(e.amount_paid||0)}function gn(o){return o.status.toLowerCase()!=="paid"}function Nn(o,e){return o+parseFloat(e.amount_paid||0)}function vn(o,e){return o+parseFloat(e.amount_paid||0)}function wn(o,e){return new Date(e.payment_date).getTime()-new Date(o.payment_date).getTime()}function Sn(o){return o&&o.id}function Pn(){y.error("Failed to delete payment")}function Cn(){y.error("Failed to update payment")}function kn(){y.error("Failed to record payment")}function Dn(o,e){return o+parseFloat(e.amount_paid||0)}function Fn(o,e){const s=e.payment_histories?.reduce(Mn,0)||0;return o+s}function Mn(o,e){return o+parseFloat(e.amount_paid||0)}function An(o){const e={pending:{variant:"outline",label:"Pending"},paid:{variant:"default",label:"Paid"},overdue:{variant:"destructive",label:"Overdue"},partial:{variant:"outline",label:"Partial"}},s=e[o.toLowerCase()]||e.pending;return t.jsxs(Xl,{variant:s.variant,className:"flex w-fit items-center gap-1",children:[t.jsx(ln,{className:"h-3 w-3"}),s.label]})}function Tn(o){return new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}function Ln(o){return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(o)}function qn(){y.error("Failed to void loan")}export{fr as default};
