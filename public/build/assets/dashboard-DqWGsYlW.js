import{a as we,c as ye,r as me,j as t,b as E,H as _e}from"./app-DGY1PNw2.js";import{P as Se}from"./page-header-B2JfpLAD.js";import{B as U}from"./button-CAVRZjO_.js";import{b as xe,c as fe,a as Ce,C as De,d as Pe}from"./card-CmKbRBQL.js";import{C as ke,A as Ae}from"./app-layout-DA-dM304.js";import{C as ze}from"./chevron-left-BAa9nncU.js";import{P as Le}from"./plus-B2VxZqE7.js";import{U as Be}from"./users-Ldm7Kq3K.js";import{C as Fe}from"./clock-BA9-kD75.js";import{C as Me}from"./circle-alert-CenTfMQH.js";import{C as $e}from"./calendar-BI9RttvH.js";import{F as Ie}from"./filter-nxfuDT-X.js";/* empty css            */import"./utils-vFDMP13S.js";import"./index-DqA9tmbw.js";import"./index-BFDjKlXM.js";import"./x-aukk_G32.js";import"./index-DODGe6-3.js";import"./index-BFo_cZ1A.js";import"./index-CUIwh6W2.js";import"./mainLogo-COuSJye7.js";const He=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Re=we("CircleCheckBig",He),Te=[{title:"Dashboard",href:"/dashboard"}];function ht(i){const e=ye.c(90),{stats:a,paymentSchedules:l,filters:f}=i,[m,o]=me.useState(f.date_from),[r,d]=me.useState(f.date_to);let c;e[0]===Symbol.for("react.memo_cache_sentinel")?(c=new Date,e[0]=c):c=e[0];const[p]=me.useState(c),[n,he]=me.useState(1),h=Ye,Ne=We;let W;e[1]!==m||e[2]!==r?(W=()=>{he(1),E.get("/dashboard",{date_from:m,date_to:r},{preserveState:!0,preserveScroll:!0})},e[1]=m,e[2]=r,e[3]=W):W=e[3];const pe=W;let Y;e[4]===Symbol.for("react.memo_cache_sentinel")?(Y=()=>{const s=new Date().toISOString().split("T")[0];o(s),d(s),he(1),E.get("/dashboard",{date_from:s,date_to:s},{preserveState:!0,preserveScroll:!0})},e[4]=Y):Y=e[4];const ve=Y,O=Math.ceil(l.length/10),q=(n-1)*10,ue=q+10;let G;e[5]!==ue||e[6]!==l||e[7]!==q?(G=l.slice(q,ue),e[5]=ue,e[6]=l,e[7]=q,e[8]=G):G=e[8];const x=G;let J;e[9]===Symbol.for("react.memo_cache_sentinel")?(J=s=>{he(s)},e[9]=J):J=e[9];const ge=J;Ee(p);let K;e[10]===Symbol.for("react.memo_cache_sentinel")?(K=t.jsx(_e,{title:"Dashboard"}),e[10]=K):K=e[10];const je=`Monitoring ${a.activeAccounts} active loans
                            across ${a.totalBorrowers} borrowers.`;let Q;e[11]===Symbol.for("react.memo_cache_sentinel")?(Q=t.jsxs(U,{className:"mt-2 w-full cursor-pointer md:mt-0 md:w-auto",size:"sm",onClick:Oe,children:[t.jsx(Le,{className:"mr-2 h-4 w-4"}),"New Loan"]}),e[11]=Q):Q=e[11];let u;e[12]!==je?(u=t.jsx(Se,{title:"Portfolio Overview",subtitle:je,children:Q}),e[12]=je,e[13]=u):u=e[13];let g;e[14]!==a.totalBorrowers?(g=a.totalBorrowers.toString(),e[14]=a.totalBorrowers,e[15]=g):g=e[15];let V;e[16]===Symbol.for("react.memo_cache_sentinel")?(V=t.jsx(Be,{className:"text-blue-600",size:20}),e[16]=V):V=e[16];let j;e[17]!==g?(j=t.jsx(de,{title:"Borrowers",value:g,icon:V}),e[17]=g,e[18]=j):j=e[18];let b;e[19]!==a.activeAccounts?(b=a.activeAccounts.toString(),e[19]=a.activeAccounts,e[20]=b):b=e[20];let X;e[21]===Symbol.for("react.memo_cache_sentinel")?(X=t.jsx(Re,{className:"text-emerald-600",size:20}),e[21]=X):X=e[21];let N;e[22]!==b?(N=t.jsx(de,{title:"Active Accounts",value:b,icon:X}),e[22]=b,e[23]=N):N=e[23];let y;e[24]!==a.totalPayables?(y=h(a.totalPayables),e[24]=a.totalPayables,e[25]=y):y=e[25];let Z;e[26]===Symbol.for("react.memo_cache_sentinel")?(Z=t.jsx(Fe,{className:"text-orange-500",size:20}),e[26]=Z):Z=e[26];let v;e[27]!==y?(v=t.jsx(de,{title:"Total Payables",value:y,icon:Z}),e[27]=y,e[28]=v):v=e[28];let w;e[29]!==a.overdueLoans?(w=a.overdueLoans.toString(),e[29]=a.overdueLoans,e[30]=w):w=e[30];let ee;e[31]===Symbol.for("react.memo_cache_sentinel")?(ee=t.jsx(Me,{className:"text-red-500",size:20}),e[31]=ee):ee=e[31];const be=a.overdueLoans>0;let _;e[32]!==w||e[33]!==be?(_=t.jsx(de,{title:"Overdue Loans",value:w,icon:ee,isAlert:be}),e[32]=w,e[33]=be,e[34]=_):_=e[34];let S;e[35]!==j||e[36]!==N||e[37]!==v||e[38]!==_?(S=t.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[j,N,v,_]}),e[35]=j,e[36]=N,e[37]=v,e[38]=_,e[39]=S):S=e[39];let te;e[40]===Symbol.for("react.memo_cache_sentinel")?(te=t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx($e,{className:"h-4 w-4 text-slate-500"}),t.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Filter Period:"})]}),e[40]=te):te=e[40];let se;e[41]===Symbol.for("react.memo_cache_sentinel")?(se=s=>o(s.target.value),e[41]=se):se=e[41];let C;e[42]!==m?(C=t.jsx("input",{type:"date",value:m,onChange:se,className:"w-full rounded-md border border-slate-300 px-3 py-1.5 text-sm focus:ring-2 focus:ring-emerald-500 focus:outline-none sm:w-auto"}),e[42]=m,e[43]=C):C=e[43];let ae;e[44]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsx("span",{className:"text-sm text-slate-500",children:"to"}),e[44]=ae):ae=e[44];let le;e[45]===Symbol.for("react.memo_cache_sentinel")?(le=s=>d(s.target.value),e[45]=le):le=e[45];let D;e[46]!==r?(D=t.jsx("input",{type:"date",value:r,onChange:le,className:"w-full rounded-md border border-slate-300 px-3 py-1.5 text-sm focus:ring-2 focus:ring-emerald-500 focus:outline-none sm:w-auto"}),e[46]=r,e[47]=D):D=e[47];let P;e[48]!==C||e[49]!==D?(P=t.jsxs("div",{className:"flex min-w-0 flex-wrap items-center gap-2",children:[C,ae,D]}),e[48]=C,e[49]=D,e[50]=P):P=e[50];let re;e[51]===Symbol.for("react.memo_cache_sentinel")?(re=t.jsx(Ie,{className:"mr-2 h-3 w-3"}),e[51]=re):re=e[51];let k;e[52]!==pe?(k=t.jsxs(U,{size:"sm",className:"w-full bg-emerald-600 shadow-none hover:bg-emerald-700 sm:w-auto",onClick:pe,children:[re,"Apply"]}),e[52]=pe,e[53]=k):k=e[53];let ne;e[54]===Symbol.for("react.memo_cache_sentinel")?(ne=t.jsx(U,{size:"sm",variant:"outline",className:"w-full shadow-none sm:w-auto",onClick:ve,children:"Reset"}),e[54]=ne):ne=e[54];let A;e[55]!==k?(A=t.jsxs("div",{className:"flex w-full gap-2 sm:w-auto",children:[k,ne]}),e[55]=k,e[56]=A):A=e[56];let z;e[57]!==P||e[58]!==A?(z=t.jsx(xe,{className:"border-slate-200 bg-slate-50 shadow-none",children:t.jsx(fe,{className:"p-4",children:t.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:flex-wrap sm:items-center",children:[te,P,A]})})}),e[57]=P,e[58]=A,e[59]=z):z=e[59];let ie;e[60]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsx(Ce,{className:"text-lg font-bold",children:"Payment Schedules"}),e[60]=ie):ie=e[60];let L;e[61]!==l.length?(L=l.length>0&&t.jsxs("span",{className:"ml-2 text-slate-600",children:["(",l.length," total)"]}),e[61]=l.length,e[62]=L):L=e[62];let B;e[63]!==L?(B=t.jsxs(De,{children:[ie,t.jsxs(Pe,{children:["Scheduled payments for the selected period",L]})]}),e[63]=L,e[64]=B):B=e[64];let oe;e[65]===Symbol.for("react.memo_cache_sentinel")?(oe=t.jsx("thead",{className:"border-b border-slate-200 bg-slate-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left font-semibold text-slate-600",children:"Borrower"}),t.jsx("th",{className:"px-4 py-3 text-left font-semibold text-slate-600",children:"Due Date"}),t.jsx("th",{className:"px-4 py-3 text-right font-semibold text-slate-600",children:"Amount Due"}),t.jsx("th",{className:"px-4 py-3 text-right font-semibold text-slate-600",children:"Paid"}),t.jsx("th",{className:"px-4 py-3 text-right font-semibold text-slate-600",children:"Remaining"}),t.jsx("th",{className:"px-4 py-3 text-center font-semibold text-slate-600",children:"Status"})]})}),e[65]=oe):oe=e[65];let F;e[66]!==x?(F=x.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"px-4 py-8 text-center text-slate-500",children:"No payment schedules found for this period"})}):x.map(s=>t.jsxs("tr",{onClick:()=>E.get(`/my-pautang/${s.loan_id}`),className:"hover:bg-slate-50 cursor-pointer",children:[t.jsx("td",{className:"px-4 py-3 font-medium text-slate-900",children:s.borrower_name}),t.jsx("td",{className:"px-4 py-3 text-slate-600",children:Ne(s.due_date)}),t.jsx("td",{className:"px-4 py-3 text-right font-medium text-slate-900",children:h(s.total_due)}),t.jsx("td",{className:"px-4 py-3 text-right font-medium text-emerald-600",children:h(s.paid_amount)}),t.jsx("td",{className:"px-4 py-3 text-right font-medium text-orange-600",children:h(s.remaining_amount)}),t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${s.status==="paid"?"bg-emerald-50 text-emerald-700":s.status==="overdue"?"bg-red-50 text-red-700":"bg-blue-50 text-blue-700"}`,children:s.status.toUpperCase()})})]},s.id)),e[66]=x,e[67]=F):F=e[67];let M;e[68]!==F?(M=t.jsx("div",{className:"hidden md:block",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[oe,t.jsx("tbody",{className:"divide-y divide-slate-100",children:F})]})})}),e[68]=F,e[69]=M):M=e[69];let $;e[70]!==x?($=x.length===0?t.jsx("div",{className:"px-4 py-8 text-center text-slate-500",children:"No payment schedules found for this period"}):x.map(s=>t.jsx(xe,{onClick:()=>E.get(`/my-pautang/${s.loan_id}`),className:"mb-3 border-none shadow-sm ring-1 ring-slate-200",children:t.jsx(fe,{className:"p-3",children:t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"truncate font-medium text-slate-900",children:s.borrower_name}),t.jsx("p",{className:"text-sm text-slate-600",children:Ne(s.due_date)}),t.jsxs("div",{className:"mt-2 flex flex-col flex-wrap items-start gap-2 text-sm text-slate-600 sm:flex-row",children:[t.jsx("div",{children:"Due:"}),t.jsx("div",{className:"font-medium text-slate-900",children:h(s.total_due)}),t.jsx("div",{children:"Paid:"}),t.jsx("div",{className:"font-medium text-emerald-600",children:h(s.paid_amount)})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"font-medium text-orange-600",children:h(s.remaining_amount)}),t.jsx("span",{className:`mt-2 inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${s.status==="paid"?"bg-emerald-50 text-emerald-700":s.status==="overdue"?"bg-red-50 text-red-700":"bg-blue-50 text-blue-700"}`,children:s.status.toUpperCase()})]})]})})},s.id)),e[70]=x,e[71]=$):$=e[71];let I;e[72]!==$?(I=t.jsx("div",{className:"block md:hidden",children:$}),e[72]=$,e[73]=I):I=e[73];let H;e[74]!==n||e[75]!==l.length||e[76]!==O?(H=l.length>10&&t.jsxs("div",{className:"mt-4 flex flex-col gap-2 border-t border-slate-200 pt-4 sm:flex-row sm:items-center sm:justify-between",children:[t.jsxs("div",{className:"text-center text-sm text-slate-600 sm:text-left",children:["Showing"," ",t.jsx("span",{className:"font-medium",children:(n-1)*10+1})," ","to"," ",t.jsx("span",{className:"font-medium",children:Math.min(n*10,l.length)})," ","of"," ",t.jsx("span",{className:"font-medium",children:l.length})," ","results"]}),t.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2 sm:flex-nowrap",children:[t.jsxs(U,{size:"sm",variant:"outline",onClick:()=>ge(n-1),disabled:n===1,className:"flex-shrink-0 shadow-none","aria-label":"Previous page",children:[t.jsx(ze,{className:"h-4 w-4"}),t.jsx("span",{className:"hidden sm:inline",children:"Previous"})]}),t.jsx("div",{className:"hidden max-w-[40vw] items-center gap-1 overflow-x-auto sm:flex lg:max-w-none",children:Array.from({length:O},Ue).map(s=>t.jsx(U,{size:"sm",variant:n===s?"default":"outline",onClick:()=>ge(s),className:`shadow-none ${n===s?"bg-emerald-600 hover:bg-emerald-700":""}`,children:s},s))}),t.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 sm:hidden",children:[t.jsx("span",{children:"Page"}),t.jsx("span",{className:"font-medium",children:n}),t.jsx("span",{children:"of"}),t.jsx("span",{className:"font-medium",children:O})]}),t.jsxs(U,{size:"sm",variant:"outline",onClick:()=>ge(n+1),disabled:n===O,className:"flex-shrink-0 shadow-none","aria-label":"Next page",children:[t.jsx("span",{className:"hidden sm:inline",children:"Next"}),t.jsx(ke,{className:"h-4 w-4"})]})]})]}),e[74]=n,e[75]=l.length,e[76]=O,e[77]=H):H=e[77];let R;e[78]!==M||e[79]!==I||e[80]!==H?(R=t.jsxs(fe,{children:[M,I,H]}),e[78]=M,e[79]=I,e[80]=H,e[81]=R):R=e[81];let T;e[82]!==B||e[83]!==R?(T=t.jsx("div",{className:"grid grid-cols-1",children:t.jsxs(xe,{className:"border-none shadow-sm ring-1 ring-slate-200 lg:col-span-2",children:[B,R]})}),e[82]=B,e[83]=R,e[84]=T):T=e[84];let ce;return e[85]!==S||e[86]!==z||e[87]!==T||e[88]!==u?(ce=t.jsxs(Ae,{breadcrumbs:Te,children:[K,t.jsxs("div",{className:"min-h-screen space-y-8 bg-slate-50/50 p-6 lg:p-10",children:[u,S,z,T]})]}),e[85]=S,e[86]=z,e[87]=T,e[88]=u,e[89]=ce):ce=e[89],ce}function Ue(i,e){return e+1}function Oe(){return E.get("/my-pautang/create")}function Ee(i){const e=i.getFullYear(),a=i.getMonth(),l=new Date(e,a,1),m=new Date(e,a+1,0).getDate(),o=l.getDay();return{daysInMonth:m,startingDayOfWeek:o,year:e,month:a}}function We(i){return new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}function Ye(i){return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:0}).format(i)}function de(i){const e=ye.c(12),{title:a,value:l,icon:f,isAlert:m}=i;let o;e[0]!==a?(o=t.jsx("p",{className:"truncate text-xs font-semibold tracking-widest text-slate-500 uppercase",children:a}),e[0]=a,e[1]=o):o=e[1];let r;e[2]!==f?(r=t.jsx("div",{className:"rounded-xl bg-slate-50 p-2.5 shadow-sm ring-1 ring-slate-100",children:f}),e[2]=f,e[3]=r):r=e[3];let d;e[4]!==o||e[5]!==r?(d=t.jsx("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:t.jsxs("div",{className:"flex min-w-0 items-center gap-3",children:[o,r]})}),e[4]=o,e[5]=r,e[6]=d):d=e[6];let c;e[7]!==l?(c=t.jsx("h3",{className:"mt-1 text-2xl font-bold text-slate-900",children:l}),e[7]=l,e[8]=c):c=e[8];let p;return e[9]!==d||e[10]!==c?(p=t.jsx(xe,{className:"border-none shadow-sm ring-1 ring-slate-200",children:t.jsx(fe,{className:"p-3",children:t.jsxs("div",{children:[d,c]})})}),e[9]=d,e[10]=c,e[11]=p):p=e[11],p}export{ht as default};
