import{a as be,c as ue,r as oe,j as t,b as pe,H as ye}from"./app-HXp_HS6a.js";import{B as T}from"./button-CZa5jYZO.js";import{b as he,c as fe,a as Ne,C as ve,d as _e}from"./card-C-wSXjzY.js";import{C as Se,A as we}from"./app-layout-BcMWr9kW.js";import{C as Ce}from"./chevron-left-BqHx9Bht.js";import{C as De}from"./calendar-WTKvlPoN.js";import{F as Ae}from"./filter-BqrL67Iv.js";import{U as Pe}from"./users-BxH5MgoL.js";import{C as ke}from"./clock-FbQIJQe9.js";import{C as Be}from"./circle-alert-BPAeOZl1.js";/* empty css            */import"./utils-2z5z-fWg.js";import"./index-BS65bE4B.js";import"./index-D9-sitSh.js";import"./x-CocgeCkB.js";import"./index-EQ9VFK-G.js";import"./index-djlUZpQJ.js";import"./index-ChcvosPI.js";import"./mainLogo-COuSJye7.js";const Le=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ze=be("CircleCheckBig",Le);function at(o){const e=ue.c(84),{stats:s,paymentSchedules:a,filters:p}=o,[i,h]=oe.useState(p.date_from),[n,d]=oe.useState(p.date_to);let c;e[0]===Symbol.for("react.memo_cache_sentinel")?(c=new Date,e[0]=c):c=e[0];const[f]=oe.useState(c),[r,m]=oe.useState(1),x=Re,ge=Ie;let H;e[1]!==i||e[2]!==n?(H=()=>{m(1),pe.get("/dashboard",{date_from:i,date_to:n},{preserveState:!0,preserveScroll:!0})},e[1]=i,e[2]=n,e[3]=H):H=e[3];const ce=H;let E;e[4]===Symbol.for("react.memo_cache_sentinel")?(E=()=>{const l=new Date().toISOString().split("T")[0];h(l),d(l),m(1),pe.get("/dashboard",{date_from:l,date_to:l},{preserveState:!0,preserveScroll:!0})},e[4]=E):E=e[4];const je=E,O=Math.ceil(a.length/10),U=(r-1)*10,me=U+10;let $;e[5]!==me||e[6]!==a||e[7]!==U?($=a.slice(U,me),e[5]=me,e[6]=a,e[7]=U,e[8]=$):$=e[8];const W=$;let Y;e[9]===Symbol.for("react.memo_cache_sentinel")?(Y=l=>{m(l)},e[9]=Y):Y=e[9];const de=Y;Me(f);let q;e[10]===Symbol.for("react.memo_cache_sentinel")?(q=t.jsx(ye,{title:"Dashboard"}),e[10]=q):q=e[10];let G;e[11]===Symbol.for("react.memo_cache_sentinel")?(G=t.jsx("h1",{className:"text-3xl font-bold tracking-tight text-slate-900",children:"Portfolio Overview"}),e[11]=G):G=e[11];let u;e[12]!==s.activeAccounts||e[13]!==s.totalBorrowers?(u=t.jsx("div",{className:"flex flex-col justify-between gap-4 md:flex-row md:items-center",children:t.jsxs("div",{children:[G,t.jsxs("p",{className:"font-medium text-slate-500",children:["Monitoring ",s.activeAccounts," active loans across ",s.totalBorrowers," borrowers."]})]})}),e[12]=s.activeAccounts,e[13]=s.totalBorrowers,e[14]=u):u=e[14];let J;e[15]===Symbol.for("react.memo_cache_sentinel")?(J=t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(De,{className:"h-4 w-4 text-slate-500"}),t.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Filter Period:"})]}),e[15]=J):J=e[15];let K;e[16]===Symbol.for("react.memo_cache_sentinel")?(K=l=>h(l.target.value),e[16]=K):K=e[16];let g;e[17]!==i?(g=t.jsx("input",{type:"date",value:i,onChange:K,className:"rounded-md border border-slate-300 px-3 py-1.5 text-sm focus:ring-2 focus:ring-emerald-500 focus:outline-none"}),e[17]=i,e[18]=g):g=e[18];let Q;e[19]===Symbol.for("react.memo_cache_sentinel")?(Q=t.jsx("span",{className:"text-sm text-slate-500",children:"to"}),e[19]=Q):Q=e[19];let V;e[20]===Symbol.for("react.memo_cache_sentinel")?(V=l=>d(l.target.value),e[20]=V):V=e[20];let j;e[21]!==n?(j=t.jsx("input",{type:"date",value:n,onChange:V,className:"rounded-md border border-slate-300 px-3 py-1.5 text-sm focus:ring-2 focus:ring-emerald-500 focus:outline-none"}),e[21]=n,e[22]=j):j=e[22];let b;e[23]!==g||e[24]!==j?(b=t.jsxs("div",{className:"flex items-center gap-2",children:[g,Q,j]}),e[23]=g,e[24]=j,e[25]=b):b=e[25];let X;e[26]===Symbol.for("react.memo_cache_sentinel")?(X=t.jsx(Ae,{className:"mr-2 h-3 w-3"}),e[26]=X):X=e[26];let y;e[27]!==ce?(y=t.jsxs(T,{size:"sm",className:"bg-emerald-600 shadow-none hover:bg-emerald-700",onClick:ce,children:[X,"Apply"]}),e[27]=ce,e[28]=y):y=e[28];let Z;e[29]===Symbol.for("react.memo_cache_sentinel")?(Z=t.jsx(T,{size:"sm",variant:"outline",className:"shadow-none",onClick:je,children:"Reset"}),e[29]=Z):Z=e[29];let N;e[30]!==b||e[31]!==y?(N=t.jsx(he,{className:"border-slate-200 bg-slate-50 shadow-none",children:t.jsx(fe,{className:"p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[J,b,y,Z]})})}),e[30]=b,e[31]=y,e[32]=N):N=e[32];let v;e[33]!==s.totalBorrowers?(v=s.totalBorrowers.toString(),e[33]=s.totalBorrowers,e[34]=v):v=e[34];let ee;e[35]===Symbol.for("react.memo_cache_sentinel")?(ee=t.jsx(Pe,{className:"text-blue-600",size:20}),e[35]=ee):ee=e[35];let _;e[36]!==v?(_=t.jsx(ie,{title:"Borrowers",value:v,icon:ee}),e[36]=v,e[37]=_):_=e[37];let S;e[38]!==s.activeAccounts?(S=s.activeAccounts.toString(),e[38]=s.activeAccounts,e[39]=S):S=e[39];let te;e[40]===Symbol.for("react.memo_cache_sentinel")?(te=t.jsx(ze,{className:"text-emerald-600",size:20}),e[40]=te):te=e[40];let w;e[41]!==S?(w=t.jsx(ie,{title:"Active Accounts",value:S,icon:te}),e[41]=S,e[42]=w):w=e[42];let C;e[43]!==s.totalPayables?(C=x(s.totalPayables),e[43]=s.totalPayables,e[44]=C):C=e[44];let se;e[45]===Symbol.for("react.memo_cache_sentinel")?(se=t.jsx(ke,{className:"text-orange-500",size:20}),e[45]=se):se=e[45];let D;e[46]!==C?(D=t.jsx(ie,{title:"Total Payables",value:C,icon:se}),e[46]=C,e[47]=D):D=e[47];let A;e[48]!==s.overdueLoans?(A=s.overdueLoans.toString(),e[48]=s.overdueLoans,e[49]=A):A=e[49];let le;e[50]===Symbol.for("react.memo_cache_sentinel")?(le=t.jsx(Be,{className:"text-red-500",size:20}),e[50]=le):le=e[50];const xe=s.overdueLoans>0;let P;e[51]!==A||e[52]!==xe?(P=t.jsx(ie,{title:"Overdue Loans",value:A,icon:le,isAlert:xe}),e[51]=A,e[52]=xe,e[53]=P):P=e[53];let k;e[54]!==_||e[55]!==w||e[56]!==D||e[57]!==P?(k=t.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[_,w,D,P]}),e[54]=_,e[55]=w,e[56]=D,e[57]=P,e[58]=k):k=e[58];let ae;e[59]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsx(Ne,{className:"text-lg font-bold",children:"Payment Schedules"}),e[59]=ae):ae=e[59];let B;e[60]!==a.length?(B=a.length>0&&t.jsxs("span",{className:"ml-2 text-slate-600",children:["(",a.length," total)"]}),e[60]=a.length,e[61]=B):B=e[61];let L;e[62]!==B?(L=t.jsxs(ve,{children:[ae,t.jsxs(_e,{children:["Scheduled payments for the selected period",B]})]}),e[62]=B,e[63]=L):L=e[63];let re;e[64]===Symbol.for("react.memo_cache_sentinel")?(re=t.jsx("thead",{className:"border-b border-slate-200 bg-slate-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left font-semibold text-slate-600",children:"Borrower"}),t.jsx("th",{className:"px-4 py-3 text-left font-semibold text-slate-600",children:"Due Date"}),t.jsx("th",{className:"px-4 py-3 text-right font-semibold text-slate-600",children:"Amount Due"}),t.jsx("th",{className:"px-4 py-3 text-right font-semibold text-slate-600",children:"Paid"}),t.jsx("th",{className:"px-4 py-3 text-right font-semibold text-slate-600",children:"Remaining"}),t.jsx("th",{className:"px-4 py-3 text-center font-semibold text-slate-600",children:"Status"})]})}),e[64]=re):re=e[64];let z;e[65]!==W?(z=W.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"px-4 py-8 text-center text-slate-500",children:"No payment schedules found for this period"})}):W.map(l=>t.jsxs("tr",{className:"hover:bg-slate-50",children:[t.jsx("td",{className:"px-4 py-3 font-medium text-slate-900",children:l.borrower_name}),t.jsx("td",{className:"px-4 py-3 text-slate-600",children:ge(l.due_date)}),t.jsx("td",{className:"px-4 py-3 text-right font-medium text-slate-900",children:x(l.total_due)}),t.jsx("td",{className:"px-4 py-3 text-right font-medium text-emerald-600",children:x(l.paid_amount)}),t.jsx("td",{className:"px-4 py-3 text-right font-medium text-orange-600",children:x(l.remaining_amount)}),t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${l.status==="paid"?"bg-emerald-50 text-emerald-700":l.status==="overdue"?"bg-red-50 text-red-700":"bg-blue-50 text-blue-700"}`,children:l.status.toUpperCase()})})]},l.id)),e[65]=W,e[66]=z):z=e[66];let F;e[67]!==z?(F=t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[re,t.jsx("tbody",{className:"divide-y divide-slate-100",children:z})]})}),e[67]=z,e[68]=F):F=e[68];let M;e[69]!==r||e[70]!==a.length||e[71]!==O?(M=a.length>10&&t.jsxs("div",{className:"mt-4 flex items-center justify-between border-t border-slate-200 pt-4",children:[t.jsxs("div",{className:"text-sm text-slate-600",children:["Showing"," ",t.jsx("span",{className:"font-medium",children:(r-1)*10+1})," ","to"," ",t.jsx("span",{className:"font-medium",children:Math.min(r*10,a.length)})," ","of"," ",t.jsx("span",{className:"font-medium",children:a.length})," ","results"]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(T,{size:"sm",variant:"outline",onClick:()=>de(r-1),disabled:r===1,className:"shadow-none",children:[t.jsx(Ce,{className:"h-4 w-4"}),"Previous"]}),t.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:O},Fe).map(l=>t.jsx(T,{size:"sm",variant:r===l?"default":"outline",onClick:()=>de(l),className:`shadow-none ${r===l?"bg-emerald-600 hover:bg-emerald-700":""}`,children:l},l))}),t.jsxs(T,{size:"sm",variant:"outline",onClick:()=>de(r+1),disabled:r===O,className:"shadow-none",children:["Next",t.jsx(Se,{className:"h-4 w-4"})]})]})]}),e[69]=r,e[70]=a.length,e[71]=O,e[72]=M):M=e[72];let I;e[73]!==F||e[74]!==M?(I=t.jsxs(fe,{children:[F,M]}),e[73]=F,e[74]=M,e[75]=I):I=e[75];let R;e[76]!==L||e[77]!==I?(R=t.jsx("div",{className:"grid grid-cols-1 ",children:t.jsxs(he,{className:"border-none shadow-sm ring-1 ring-slate-200 lg:col-span-2",children:[L,I]})}),e[76]=L,e[77]=I,e[78]=R):R=e[78];let ne;return e[79]!==N||e[80]!==k||e[81]!==R||e[82]!==u?(ne=t.jsxs(we,{children:[q,t.jsxs("div",{className:"min-h-screen space-y-8 bg-slate-50/50 p-6 lg:p-10",children:[u,N,k,R]})]}),e[79]=N,e[80]=k,e[81]=R,e[82]=u,e[83]=ne):ne=e[83],ne}function Fe(o,e){return e+1}function Me(o){const e=o.getFullYear(),s=o.getMonth(),a=new Date(e,s,1),i=new Date(e,s+1,0).getDate(),h=a.getDay();return{daysInMonth:i,startingDayOfWeek:h,year:e,month:s}}function Ie(o){return new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}function Re(o){return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:0}).format(o)}function ie(o){const e=ue.c(17),{title:s,value:a,icon:p,isAlert:i}=o,h=i===void 0?!1:i;let n;e[0]!==p?(n=t.jsx("div",{className:"rounded-xl bg-slate-50 p-2.5 shadow-sm ring-1 ring-slate-100",children:p}),e[0]=p,e[1]=n):n=e[1];let d;e[2]!==h?(d=h&&t.jsx("span",{className:"rounded-md bg-red-100 px-2 py-1 text-[10px] font-bold tracking-wider text-red-700 uppercase",children:"ALERT"}),e[2]=h,e[3]=d):d=e[3];let c;e[4]!==n||e[5]!==d?(c=t.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[n,d]}),e[4]=n,e[5]=d,e[6]=c):c=e[6];let f;e[7]!==s?(f=t.jsx("p",{className:"text-xs font-semibold tracking-widest text-slate-500 uppercase",children:s}),e[7]=s,e[8]=f):f=e[8];let r;e[9]!==a?(r=t.jsx("h3",{className:"mt-1 text-2xl font-bold text-slate-900",children:a}),e[9]=a,e[10]=r):r=e[10];let m;e[11]!==f||e[12]!==r?(m=t.jsxs("div",{children:[f,r]}),e[11]=f,e[12]=r,e[13]=m):m=e[13];let x;return e[14]!==c||e[15]!==m?(x=t.jsx(he,{className:"border-none shadow-sm ring-1 ring-slate-200",children:t.jsxs(fe,{className:"p-6",children:[c,m]})}),e[14]=c,e[15]=m,e[16]=x):x=e[16],x}export{at as default};
