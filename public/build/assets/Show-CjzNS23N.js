import{a as E,c as wl,j as t,r as T,u as Va,t as h,H as Dl,L as Fl,T as Ml}from"./app-DM40daPY.js";import{B as Tl}from"./badge-oAipeM97.js";import{B as f}from"./button-Dd6bhrKo.js";import{b as A,c as I,C as bs,a as gs}from"./card-BjCrVnt8.js";import{D as za,a as Ua,b as Ga,c as Xa,d as Wa,e as Za}from"./dialog-bjI79yfP.js";import{A as Al,a as Il}from"./alert-CtHrqL_p.js";import{I as v}from"./input-BfG0743i.js";import{L as x}from"./label-Cc3bddl2.js";import{S as gl}from"./separator-Wy7HEC4Y.js";import{T as Nl}from"./textarea-B-xhAThe.js";import{A as El}from"./app-layout-C9eHtrjI.js";import{D as Ll}from"./download-BsQUhsX1.js";import{C as Hl}from"./circle-alert-BWjk79QX.js";import{U as Ol}from"./user-CSsRtUvq.js";import{C as ql}from"./calendar-kT_nZnNi.js";import{D as Rl,T as $l}from"./trending-up-3_plOAwH.js";import{H as Bl}from"./history-DOpSBiW0.js";import{C as Vl}from"./clock-CNJiONkk.js";/* empty css            */import"./utils-BxiAad28.js";import"./x-Bd4_7x_e.js";import"./index-BWO7bJWN.js";import"./index-DUpHjiA5.js";import"./index-BeeHXhO8.js";import"./index-DKyHrSmJ.js";import"./index-ChcvosPI.js";import"./mainLogo-COuSJye7.js";import"./users-D9y25xaO.js";const zl=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Ul=E("ArrowLeft",zl);const Gl=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]],vl=E("Ban",Gl);const Xl=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Wl=E("CircleX",Xl);const Zl=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Sl=E("CreditCard",Zl);const Jl=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Kl=E("FileText",Jl);const Ql=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Ja=E("SquarePen",Ql);const Yl=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],en=E("Timer",Yl);function tn(o){const e=wl.c(12),{children:s,title:F,description:S}=o;let b;e[0]!==F?(b=t.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:F}),e[0]=F,e[1]=b):b=e[1];let _;e[2]!==S?(_=t.jsx("p",{className:"mt-1 text-muted-foreground",children:S}),e[2]=S,e[3]=_):_=e[3];let g;e[4]!==b||e[5]!==_?(g=t.jsxs("div",{children:[b,_]}),e[4]=b,e[5]=_,e[6]=g):g=e[6];let y;e[7]!==s?(y=t.jsx("div",{className:"flex items-center justify-center gap-3",children:s}),e[7]=s,e[8]=y):y=e[8];let w;return e[9]!==g||e[10]!==y?(w=t.jsxs("div",{className:"flex flex-col justify-between gap-4 sm:flex-row sm:items-center",children:[g,y]}),e[9]=g,e[10]=y,e[11]=w):w=e[11],w}function Wn(o){const e=wl.c(513),{loan:s}=o,[F,S]=T.useState(!1),[b,_]=T.useState(!1),[g,y]=T.useState(!1),[w,Ns]=T.useState(!1),[d,Ka]=T.useState(!1),[m,L]=T.useState(null),[j,vs]=T.useState(null);let Ss;e[0]===Symbol.for("react.memo_cache_sentinel")?(Ss={payment_schedule_id:"",penalty_amount:"",remarks:""},e[0]=Ss):Ss=e[0];const r=Va(Ss);let ws;e[1]===Symbol.for("react.memo_cache_sentinel")?(ws={payment_schedule_id:"",amount_paid:"",payment_method:"cash",reference_number:"",receipt_number:"",payment_date:new Date().toISOString().split("T")[0]},e[1]=ws):ws=e[1];const l=Va(ws);let Ps;e[2]===Symbol.for("react.memo_cache_sentinel")?(Ps={amount_paid:"",payment_method:"cash",reference_number:"",receipt_number:"",payment_date:""},e[2]=Ps):Ps=e[2];const a=Va(Ps);let Cs;e[3]===Symbol.for("react.memo_cache_sentinel")?(Cs={void_reason:""},e[3]=Cs):Cs=e[3];const c=Va(Cs);let ks;e[4]===Symbol.for("react.memo_cache_sentinel")?(ks=()=>{Ns(!0)},e[4]=ks):ks=e[4];const Pl=ks;let Ds;e[5]!==s.id||e[6]!==c?(Ds=i=>{i.preventDefault(),c.put(`/my-pautang/${s.id}/void`,{onSuccess:()=>{h.success("Loan voided successfully"),Ns(!1),c.reset()},onError:_n})},e[5]=s.id,e[6]=c,e[7]=Ds):Ds=e[7];const Qa=Ds;let Fs;e[8]!==c?(Fs=()=>{Ns(!1),c.reset()},e[8]=c,e[9]=Fs):Fs=e[9];const Ya=Fs,u=yn,M=hn,el=xn;let H,O,q,R,$,B,V,z,U,G,P,X,C,W,k,Z,D,J,K;if(e[10]!==a||e[11]!==d||e[12]!==s.amount||e[13]!==s.borrower?.address||e[14]!==s.borrower?.contact_number||e[15]!==s.borrower?.full_name||e[16]!==s.duration||e[17]!==s.frequency||e[18]!==s.id||e[19]!==s.interest_type||e[20]!==s.interest_value||e[21]!==s.is_voided||e[22]!==s.payment_schedules||e[23]!==s.remaining_balance||e[24]!==s.status||e[25]!==s.total_amount||e[26]!==s.total_penalties||e[27]!==s.transaction_date||e[28]!==s.void_reason||e[29]!==s.voided_at||e[30]!==l||e[31]!==r||e[32]!==j){const i=s.payment_schedules?.reduce(un,0)||0,ia=s.total_amount>0?i/s.total_amount*100:0;let oa;e[52]!==r?(oa=n=>{if(n.status.toLowerCase()==="paid")return;L(n);const p=n.penalty_amount&&parseFloat(n.penalty_amount)>0;Ka(p),r.setData({payment_schedule_id:n.id,penalty_amount:n.penalty_amount||"",remarks:""}),S(!0)},e[52]=r,e[53]=oa):oa=e[53];const dl=oa;let ca;e[54]!==d||e[55]!==r?(ca=n=>{n.preventDefault();const p=`/payment-schedules/${r.data.payment_schedule_id}/penalty`;r.put(p,{onSuccess:()=>{h.success(d?"Penalty updated successfully":"Penalty added successfully"),S(!1),r.reset(),L(null),Ka(!1)},onError:()=>{h.error(d?"Failed to update penalty":"Failed to add penalty")}})},e[54]=d,e[55]=r,e[56]=ca):ca=e[56],G=ca;let ma;e[57]!==r?(ma=()=>{S(!1),r.reset(),L(null),Ka(!1)},e[57]=r,e[58]=ma):ma=e[58],B=ma;let da;e[59]!==l?(da=n=>{if(n.status.toLowerCase()==="paid")return;L(n);const p=n.payment_histories?.reduce(pn,0)||0,N=parseFloat(n.total_due)-p;l.setData({payment_schedule_id:n.id,amount_paid:N.toFixed(2),payment_method:"cash",reference_number:"",receipt_number:"",payment_date:new Date().toISOString().split("T")[0]}),_(!0)},e[59]=l,e[60]=da):da=e[60];const pl=da;let pa;e[61]!==l?(pa=n=>{n.preventDefault(),l.post("/payment-histories",{onSuccess:()=>{h.success("Payment recorded successfully"),_(!1),l.reset(),L(null)},onError:dn})},e[61]=l,e[62]=pa):pa=e[62],U=pa;let ua;e[63]!==l?(ua=()=>{_(!1),l.reset(),L(null)},e[63]=l,e[64]=ua):ua=e[64],$=ua;let fa;e[65]!==a?(fa=n=>{if(!n||!n.id){h.error("Invalid payment record");return}vs(n),a.setData({amount_paid:String(n.amount_paid),payment_method:n.payment_method,reference_number:n.reference_number||"",receipt_number:n.receipt_number||"",payment_date:n.payment_date}),y(!0)},e[65]=a,e[66]=fa):fa=e[66];const Cl=fa;let xa;e[67]!==a||e[68]!==j?(xa=n=>{if(n.preventDefault(),!j?.id){h.error("Invalid payment record");return}a.put(`/payment-histories/${j.id}`,{onSuccess:()=>{h.success("Payment updated successfully"),y(!1),a.reset(),vs(null)},onError:mn})},e[67]=a,e[68]=j,e[69]=xa):xa=e[69],z=xa;let ha;e[70]!==a?(ha=()=>{y(!1),a.reset(),vs(null)},e[70]=a,e[71]=ha):ha=e[71],R=ha;let ya;e[72]!==a?(ya=n=>{if(!n){h.error("Invalid payment record");return}confirm("Are you sure you want to delete this payment record?")&&a.delete(`/payment-histories/${n}`,{onSuccess:()=>{h.success("Payment deleted successfully"),y(!1),a.reset(),vs(null)},onError:cn})},e[72]=a,e[73]=ya):ya=e[73],V=ya;const jl=(s.payment_schedules?.flatMap(n=>(n.payment_histories||[]).filter(on).map(p=>({id:p.id,payment_schedule_id:p.payment_schedule_id,amount_paid:p.amount_paid,payment_method:p.payment_method,reference_number:p.reference_number,receipt_number:p.receipt_number,payment_date:p.payment_date,schedule_number:s.payment_schedules.findIndex(N=>N.id===n.id)+1,due_date:n.due_date})))||[]).sort(rn);q=El,e[74]===Symbol.for("react.memo_cache_sentinel")?(D=t.jsx(Dl,{title:"My Pautang Details"}),e[74]=D):D=e[74],Z="p-8",W="grid grid-cols-1 gap-6 lg:grid-cols-3";let _a;e[75]===Symbol.for("react.memo_cache_sentinel")?(_a=t.jsx(tn,{title:"My Pautang Details",description:"Installment order details and payment schedule"}),e[75]=_a):_a=e[75];let qt;e[76]!==s.is_voided?(qt=!s.is_voided&&t.jsxs(f,{variant:"destructive",className:"cursor-pointer",onClick:()=>Pl(),children:[t.jsx(vl,{className:"mr-2 h-4 w-4"}),"Void Loan"]}),e[76]=s.is_voided,e[77]=qt):qt=e[77];let Rt;e[78]!==s.id||e[79]!==s.is_voided?(Rt=!s.is_voided&&t.jsx(f,{variant:"outline",asChild:!0,children:t.jsxs("a",{target:"_blank",href:`/my-pautang/${s.id}/promissory-note/download`,children:[t.jsx(Ll,{className:"mr-2 h-4 w-4"}),"Promissory Note"]})}),e[78]=s.id,e[79]=s.is_voided,e[80]=Rt):Rt=e[80];let ja;e[81]===Symbol.for("react.memo_cache_sentinel")?(ja=t.jsx(f,{variant:"outline",asChild:!0,children:t.jsxs(Fl,{href:"/my-pautang",children:[t.jsx(Ul,{className:"mr-2 h-4 w-4"}),"Back to List"]})}),e[81]=ja):ja=e[81];let $t;e[82]!==qt||e[83]!==Rt?($t=t.jsxs("div",{className:"flex items-center justify-between",children:[_a,t.jsxs("div",{className:"flex items-center gap-2",children:[qt,Rt,ja]})]}),e[82]=qt,e[83]=Rt,e[84]=$t):$t=e[84];let Bt;e[85]!==s.is_voided||e[86]!==s.void_reason||e[87]!==s.voided_at?(Bt=s.is_voided&&t.jsxs(Al,{variant:"destructive",className:"py-3",children:[t.jsx(Hl,{className:"h-4 w-4"}),t.jsxs(Il,{className:"ml-2",children:[t.jsx("span",{className:"font-semibold",children:"This order has been voided"})," ","on"," ",s.voided_at?M(s.voided_at):"N/A",s.void_reason&&` - ${s.void_reason}`]})]}),e[85]=s.is_voided,e[86]=s.void_reason,e[87]=s.voided_at,e[88]=Bt):Bt=e[88];let ba;e[89]===Symbol.for("react.memo_cache_sentinel")?(ba=t.jsx(bs,{children:t.jsxs(gs,{className:"flex items-center gap-2",children:[t.jsx(Ol,{className:"h-5 w-5"}),"Borrower Information"]})}),e[89]=ba):ba=e[89];let ga;e[90]===Symbol.for("react.memo_cache_sentinel")?(ga=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Name"}),e[90]=ga):ga=e[90];const ul=s.borrower?.full_name;let Vt;e[91]!==ul?(Vt=t.jsxs("div",{children:[ga,t.jsx("p",{className:"font-medium",children:ul})]}),e[91]=ul,e[92]=Vt):Vt=e[92];let Na;e[93]===Symbol.for("react.memo_cache_sentinel")?(Na=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Address"}),e[93]=Na):Na=e[93];const fl=s.borrower?.address;let zt;e[94]!==fl?(zt=t.jsxs("div",{children:[Na,t.jsx("p",{className:"font-medium",children:fl})]}),e[94]=fl,e[95]=zt):zt=e[95];let va;e[96]===Symbol.for("react.memo_cache_sentinel")?(va=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Phone Number"}),e[96]=va):va=e[96];const xl=s.borrower?.contact_number;let Ut;e[97]!==xl?(Ut=t.jsxs("div",{children:[va,t.jsx("p",{className:"font-medium",children:xl})]}),e[97]=xl,e[98]=Ut):Ut=e[98];let Gt;e[99]!==Vt||e[100]!==zt||e[101]!==Ut?(Gt=t.jsxs(A,{children:[ba,t.jsxs(I,{className:"space-y-3",children:[Vt,zt,Ut]})]}),e[99]=Vt,e[100]=zt,e[101]=Ut,e[102]=Gt):Gt=e[102];let Sa;e[103]===Symbol.for("react.memo_cache_sentinel")?(Sa=t.jsx(bs,{children:t.jsxs(gs,{className:"flex items-center gap-2",children:[t.jsx(Kl,{className:"h-5 w-5"}),"Transaction Details"]})}),e[103]=Sa):Sa=e[103];let wa;e[104]===Symbol.for("react.memo_cache_sentinel")?(wa=t.jsx("span",{className:"text-sm text-muted-foreground",children:"Transaction Date"}),e[104]=wa):wa=e[104];let Pa;e[105]===Symbol.for("react.memo_cache_sentinel")?(Pa=t.jsx(ql,{className:"h-4 w-4"}),e[105]=Pa):Pa=e[105];let Xt;e[106]!==s.transaction_date?(Xt=t.jsxs("div",{className:"flex justify-between",children:[wa,t.jsxs("span",{className:"flex items-center gap-1 font-medium",children:[Pa,s.transaction_date]})]}),e[106]=s.transaction_date,e[107]=Xt):Xt=e[107];let Ca;e[108]===Symbol.for("react.memo_cache_sentinel")?(Ca=t.jsx("span",{className:"text-sm text-muted-foreground",children:"Status"}),e[108]=Ca):Ca=e[108];let ka;e[109]===Symbol.for("react.memo_cache_sentinel")?(ka=t.jsx(en,{className:"h-4 w-4"}),e[109]=ka):ka=e[109];let Wt;e[110]!==s.status?(Wt=t.jsxs("div",{className:"flex justify-between",children:[Ca,t.jsxs("span",{className:"flex items-center gap-1 font-medium",children:[ka,s.status]})]}),e[110]=s.status,e[111]=Wt):Wt=e[111];let Da;e[112]===Symbol.for("react.memo_cache_sentinel")?(Da=t.jsx("span",{className:"text-sm text-muted-foreground",children:"Interest Type"}),e[112]=Da):Da=e[112];let Zt;e[113]!==s.interest_type?(Zt=t.jsxs("div",{className:"flex justify-between",children:[Da,t.jsx("span",{className:"font-medium",children:s.interest_type})]}),e[113]=s.interest_type,e[114]=Zt):Zt=e[114];let Fa;e[115]===Symbol.for("react.memo_cache_sentinel")?(Fa=t.jsx("span",{className:"text-sm text-muted-foreground",children:"Interest Period"}),e[115]=Fa):Fa=e[115];let Jt;e[116]!==s.frequency?(Jt=t.jsxs("div",{className:"flex justify-between",children:[Fa,t.jsx("span",{className:"font-medium",children:s.frequency})]}),e[116]=s.frequency,e[117]=Jt):Jt=e[117];let Ma;e[118]===Symbol.for("react.memo_cache_sentinel")?(Ma=t.jsx("span",{className:"text-sm text-muted-foreground",children:"Loan Duration"}),e[118]=Ma):Ma=e[118];let Kt;e[119]!==s.duration?(Kt=t.jsxs("div",{className:"flex justify-between",children:[Ma,t.jsx("span",{className:"font-medium",children:s.duration})]}),e[119]=s.duration,e[120]=Kt):Kt=e[120];let Qt;e[121]!==Xt||e[122]!==Wt||e[123]!==Zt||e[124]!==Jt||e[125]!==Kt?(Qt=t.jsxs(A,{children:[Sa,t.jsxs(I,{className:"space-y-3",children:[Xt,Wt,Zt,Jt,Kt]})]}),e[121]=Xt,e[122]=Wt,e[123]=Zt,e[124]=Jt,e[125]=Kt,e[126]=Qt):Qt=e[126];let Yt;e[127]!==Gt||e[128]!==Qt?(Yt=t.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[Gt,Qt]}),e[127]=Gt,e[128]=Qt,e[129]=Yt):Yt=e[129];let Ta;e[130]===Symbol.for("react.memo_cache_sentinel")?(Ta=t.jsx(bs,{children:t.jsxs(gs,{className:"flex items-center gap-2",children:[t.jsx(Rl,{className:"h-5 w-5"}),"Financial Summary"]})}),e[130]=Ta):Ta=e[130];let Aa;e[131]===Symbol.for("react.memo_cache_sentinel")?(Aa=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Principal Amount"}),e[131]=Aa):Aa=e[131];let es;e[132]!==s.amount?(es=u(s.amount),e[132]=s.amount,e[133]=es):es=e[133];let ts;e[134]!==es?(ts=t.jsxs("div",{className:"space-y-1",children:[Aa,t.jsx("p",{className:"text-2xl font-bold",children:es})]}),e[134]=es,e[135]=ts):ts=e[135];let Ia;e[136]===Symbol.for("react.memo_cache_sentinel")?(Ia=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Interest"}),e[136]=Ia):Ia=e[136];let ss;e[137]!==s.interest_type||e[138]!==s.interest_value?(ss=s.interest_type==="fixed"?u(s.interest_value):`${s.interest_value}%`,e[137]=s.interest_type,e[138]=s.interest_value,e[139]=ss):ss=e[139];let as;e[140]!==ss?(as=t.jsxs("div",{className:"space-y-1",children:[Ia,t.jsx("p",{className:"text-2xl font-bold",children:ss})]}),e[140]=ss,e[141]=as):as=e[141];let Ea;e[142]===Symbol.for("react.memo_cache_sentinel")?(Ea=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Amount"}),e[142]=Ea):Ea=e[142];let ls;e[143]!==s.total_amount?(ls=u(s.total_amount),e[143]=s.total_amount,e[144]=ls):ls=e[144];let ns;e[145]!==ls?(ns=t.jsxs("div",{className:"space-y-1",children:[Ea,t.jsx("p",{className:"text-2xl font-bold",children:ls})]}),e[145]=ls,e[146]=ns):ns=e[146];let La;e[147]===Symbol.for("react.memo_cache_sentinel")?(La=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Remaining Balance"}),e[147]=La):La=e[147];let rs;e[148]!==s.remaining_balance?(rs=u(s.remaining_balance),e[148]=s.remaining_balance,e[149]=rs):rs=e[149];let is;e[150]!==rs?(is=t.jsxs("div",{className:"space-y-1",children:[La,t.jsx("p",{className:"text-2xl font-bold text-orange-600",children:rs})]}),e[150]=rs,e[151]=is):is=e[151];let Ha;e[152]===Symbol.for("react.memo_cache_sentinel")?(Ha=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Penalties"}),e[152]=Ha):Ha=e[152];let os;e[153]!==s.total_penalties?(os=u(s.total_penalties),e[153]=s.total_penalties,e[154]=os):os=e[154];let cs;e[155]!==os?(cs=t.jsxs("div",{className:"space-y-1",children:[Ha,t.jsx("p",{className:"text-2xl font-bold",children:os})]}),e[155]=os,e[156]=cs):cs=e[156];let ms;e[157]!==ts||e[158]!==as||e[159]!==ns||e[160]!==is||e[161]!==cs?(ms=t.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[ts,as,ns,is,cs]}),e[157]=ts,e[158]=as,e[159]=ns,e[160]=is,e[161]=cs,e[162]=ms):ms=e[162];let Oa;e[163]===Symbol.for("react.memo_cache_sentinel")?(Oa=t.jsx(gl,{className:"my-4"}),e[163]=Oa):Oa=e[163];let qa;e[164]===Symbol.for("react.memo_cache_sentinel")?(qa=t.jsx("span",{className:"text-muted-foreground",children:"Payment Progress"}),e[164]=qa):qa=e[164];const hl=u(i);let ds;e[165]!==s.total_amount?(ds=u(s.total_amount),e[165]=s.total_amount,e[166]=ds):ds=e[166];let ps;e[167]!==hl||e[168]!==ds?(ps=t.jsxs("div",{className:"flex justify-between text-sm",children:[qa,t.jsxs("span",{className:"font-medium",children:[hl," of"," ",ds]})]}),e[167]=hl,e[168]=ds,e[169]=ps):ps=e[169];const yl=`${Math.min(ia,100)}%`;let us;e[170]!==yl?(us=t.jsx("div",{className:"h-3 w-full rounded-full bg-gray-200",children:t.jsx("div",{className:"h-3 rounded-full bg-primary transition-all",style:{width:yl}})}),e[170]=yl,e[171]=us):us=e[171];let fs;e[172]!==ia?(fs=ia.toFixed(1),e[172]=ia,e[173]=fs):fs=e[173];let xs;e[174]!==fs?(xs=t.jsxs("p",{className:"text-right text-xs text-muted-foreground",children:[fs,"% completed"]}),e[174]=fs,e[175]=xs):xs=e[175];let hs;e[176]!==ps||e[177]!==us||e[178]!==xs?(hs=t.jsxs("div",{className:"space-y-2",children:[ps,us,xs]}),e[176]=ps,e[177]=us,e[178]=xs,e[179]=hs):hs=e[179];let ys;e[180]!==ms||e[181]!==hs?(ys=t.jsxs(A,{children:[Ta,t.jsxs(I,{children:[ms,Oa,hs]})]}),e[180]=ms,e[181]=hs,e[182]=ys):ys=e[182];let Ra;e[183]===Symbol.for("react.memo_cache_sentinel")?(Ra=t.jsx(bs,{children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{children:[t.jsxs(gs,{className:"flex items-center gap-2",children:[t.jsx($l,{className:"h-5 w-5"}),"Payment Schedule"]}),t.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:"Complete payment history and schedule. Click on a row to add/edit penalty."})]})})}),e[183]=Ra):Ra=e[183];let $a;e[184]===Symbol.for("react.memo_cache_sentinel")?($a=t.jsx("thead",{className:"border-b bg-muted/50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"#"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Due Date"}),t.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:"Amount Due"}),t.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:"Amount Paid"}),t.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:"Remaining"}),t.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:"Penalty"}),t.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Payment Date"}),t.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Status"})]})}),e[184]=$a):$a=e[184];let _s;e[185]!==dl||e[186]!==s.payment_schedules?(_s=s.payment_schedules?.map((n,p)=>{const N=n.payment_histories?.reduce(nn,0)||0,_l=parseFloat(n.total_due)-N,Ba=n.payment_histories?.[n.payment_histories.length-1]?.payment_date,bl=n.status.toLowerCase()==="paid",kl=n.penalty_amount&&parseFloat(n.penalty_amount)>0;return t.jsxs("tr",{onClick:()=>dl(n),className:`transition-colors ${bl?"cursor-not-allowed opacity-60":"cursor-pointer hover:bg-muted/50"}`,children:[t.jsxs("td",{className:"px-4 py-4 text-sm font-medium",children:["#",p+1]}),t.jsx("td",{className:"px-4 py-4 text-sm",children:M(n.due_date)}),t.jsx("td",{className:"px-4 py-4 text-right text-sm font-medium",children:u(parseFloat(n.total_due))}),t.jsx("td",{className:"px-4 py-4 text-right text-sm",children:N>0?u(N):"-"}),t.jsx("td",{className:"px-4 py-4 text-right text-sm font-medium text-orange-600",children:u(_l)}),t.jsx("td",{className:"px-4 py-4 text-right",children:t.jsxs("div",{className:"flex items-center justify-end gap-1",children:[t.jsx("span",{className:"text-sm font-medium text-red-600",children:n.penalty_amount?u(parseFloat(n.penalty_amount)):"-"}),kl&&!bl&&t.jsx(Ja,{className:"h-3 w-3 text-muted-foreground"})]})}),t.jsx("td",{className:"px-4 py-4 text-center text-sm",children:Ba?M(Ba):"-"}),t.jsx("td",{className:"px-4 py-4 text-center",children:new Date().toISOString().split("T")[0]>n.due_date&&n.status.toLowerCase()==="pending"?el("overdue"):el(n.status)})]},n.id)}),e[185]=dl,e[186]=s.payment_schedules,e[187]=_s):_s=e[187];let js;e[188]!==_s?(js=t.jsxs(A,{children:[Ra,t.jsx(I,{className:"p-0",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[$a,t.jsx("tbody",{className:"divide-y",children:_s})]})})})]}),e[188]=_s,e[189]=js):js=e[189],e[190]!==$t||e[191]!==Bt||e[192]!==Yt||e[193]!==ys||e[194]!==js?(k=t.jsxs("div",{className:"space-y-6 lg:col-span-2",children:[$t,Bt,Yt,ys,js]}),e[190]=$t,e[191]=Bt,e[192]=Yt,e[193]=ys,e[194]=js,e[195]=k):k=e[195],X="space-y-6",e[196]!==pl||e[197]!==s.is_voided||e[198]!==s.payment_schedules?(C=s.is_voided?t.jsx(A,{children:t.jsxs(I,{className:"pt-6 text-center",children:[t.jsx(Wl,{className:"mx-auto mb-4 h-16 w-16 text-muted-foreground"}),t.jsx("h3",{className:"mb-2 text-xl font-bold",children:"No Payments Available"}),t.jsx("p",{className:"text-muted-foreground",children:"This order cannot accept payments."})]})}):t.jsxs(A,{children:[t.jsx(bs,{children:t.jsxs(gs,{className:"flex items-center gap-2",children:[t.jsx(Sl,{className:"h-5 w-5"}),"Record Payment"]})}),t.jsx(I,{className:"space-y-4",children:t.jsxs("div",{className:"space-y-3",children:[t.jsx(x,{children:"Select Payment Schedule"}),t.jsxs("div",{className:"space-y-2",children:[s.payment_schedules?.filter(ln).map((n,p)=>{const N=n.payment_histories?.reduce(an,0)||0,_l=parseFloat(n.total_due)-N;return t.jsxs(f,{variant:"outline",className:"h-auto w-full justify-between py-3",onClick:()=>pl(n),children:[t.jsxs("div",{className:"flex flex-col items-start gap-1",children:[t.jsxs("span",{className:"text-sm font-medium",children:["Payment #",s.payment_schedules.findIndex(Ba=>Ba.id===n.id)+1]}),t.jsxs("span",{className:"text-xs text-muted-foreground",children:["Due:"," ",M(n.due_date)]})]}),t.jsxs("div",{className:"flex flex-col items-end gap-1",children:[t.jsx("span",{className:"text-sm font-bold text-orange-600",children:u(_l)}),el(n.status)]})]},n.id)}),!s.payment_schedules?.some(sn)&&t.jsx("p",{className:"py-4 text-center text-sm text-muted-foreground",children:"All payments completed"})]})]})})]}),e[196]=pl,e[197]=s.is_voided,e[198]=s.payment_schedules,e[199]=C):C=e[199],O=A,e[200]===Symbol.for("react.memo_cache_sentinel")?(P=t.jsx(bs,{children:t.jsxs(gs,{className:"flex items-center gap-2",children:[t.jsx(Bl,{className:"h-5 w-5"}),"Payment History"]})}),e[200]=P):P=e[200],H=I,J="max-h-[600px] space-y-3 overflow-y-auto",K=jl.length>0?jl.map((n,p)=>t.jsxs("div",{className:"space-y-2 rounded-lg border p-3 transition-colors hover:border-primary",children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm font-medium",children:["Payment #",n.schedule_number]}),t.jsx("p",{className:"text-xs text-muted-foreground",children:M(n.payment_date)})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("p",{className:"text-sm font-bold text-green-600",children:u(parseFloat(n.amount_paid))}),t.jsx(f,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",onClick:()=>Cl(n),children:t.jsx(Ja,{className:"h-3.5 w-3.5"})})]})]}),t.jsx(gl,{}),t.jsxs("div",{className:"space-y-1 text-xs",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-muted-foreground",children:"Method:"}),t.jsx("span",{className:"font-medium capitalize",children:n.payment_method})]}),n.reference_number&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-muted-foreground",children:"Ref #:"}),t.jsx("span",{className:"font-medium",children:n.reference_number})]}),n.receipt_number&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-muted-foreground",children:"Receipt #:"}),t.jsx("span",{className:"font-medium",children:n.receipt_number})]})]})]},p)):t.jsx("p",{className:"py-8 text-center text-sm text-muted-foreground",children:"No payment history yet"}),e[10]=a,e[11]=d,e[12]=s.amount,e[13]=s.borrower?.address,e[14]=s.borrower?.contact_number,e[15]=s.borrower?.full_name,e[16]=s.duration,e[17]=s.frequency,e[18]=s.id,e[19]=s.interest_type,e[20]=s.interest_value,e[21]=s.is_voided,e[22]=s.payment_schedules,e[23]=s.remaining_balance,e[24]=s.status,e[25]=s.total_amount,e[26]=s.total_penalties,e[27]=s.transaction_date,e[28]=s.void_reason,e[29]=s.voided_at,e[30]=l,e[31]=r,e[32]=j,e[33]=H,e[34]=O,e[35]=q,e[36]=R,e[37]=$,e[38]=B,e[39]=V,e[40]=z,e[41]=U,e[42]=G,e[43]=P,e[44]=X,e[45]=C,e[46]=W,e[47]=k,e[48]=Z,e[49]=D,e[50]=J,e[51]=K}else H=e[33],O=e[34],q=e[35],R=e[36],$=e[37],B=e[38],V=e[39],z=e[40],U=e[41],G=e[42],P=e[43],X=e[44],C=e[45],W=e[46],k=e[47],Z=e[48],D=e[49],J=e[50],K=e[51];let Q;e[201]!==J||e[202]!==K?(Q=t.jsx("div",{className:J,children:K}),e[201]=J,e[202]=K,e[203]=Q):Q=e[203];let Y;e[204]!==H||e[205]!==Q?(Y=t.jsx(H,{children:Q}),e[204]=H,e[205]=Q,e[206]=Y):Y=e[206];let ee;e[207]!==O||e[208]!==P||e[209]!==Y?(ee=t.jsxs(O,{children:[P,Y]}),e[207]=O,e[208]=P,e[209]=Y,e[210]=ee):ee=e[210];let te;e[211]!==X||e[212]!==C||e[213]!==ee?(te=t.jsxs("div",{className:X,children:[C,ee]}),e[211]=X,e[212]=C,e[213]=ee,e[214]=te):te=e[214];let se;e[215]!==W||e[216]!==k||e[217]!==te?(se=t.jsxs("div",{className:W,children:[k,te]}),e[215]=W,e[216]=k,e[217]=te,e[218]=se):se=e[218];let ae;e[219]!==Z||e[220]!==se?(ae=t.jsx("div",{className:Z,children:se}),e[219]=Z,e[220]=se,e[221]=ae):ae=e[221];let Ms;e[222]===Symbol.for("react.memo_cache_sentinel")?(Ms=t.jsxs(za,{children:[t.jsxs(Ua,{className:"flex items-center gap-2",children:[t.jsx(vl,{className:"h-5 w-5 text-red-600"}),"Void Loan"]}),t.jsx(Ga,{children:"Are you sure you want to void this loan? This action cannot be undone."})]}),e[222]=Ms):Ms=e[222];let Ts;e[223]===Symbol.for("react.memo_cache_sentinel")?(Ts=t.jsxs("div",{className:"rounded-md bg-red-50 p-3 text-sm text-red-800",children:[t.jsx("p",{className:"font-medium",children:"Warning!"}),t.jsx("p",{children:"Voiding this loan will permanently mark it as cancelled."})]}),e[223]=Ts):Ts=e[223];let As;e[224]===Symbol.for("react.memo_cache_sentinel")?(As=t.jsx(x,{htmlFor:"void_reason",children:"Reason for Voiding *"}),e[224]=As):As=e[224];let le;e[225]!==c?(le=i=>c.setData("void_reason",i.target.value),e[225]=c,e[226]=le):le=e[226];let ne;e[227]!==le||e[228]!==c.data.void_reason?(ne=t.jsx(Nl,{id:"void_reason",placeholder:"Please provide a reason for voiding this loan...",className:"min-h-[100px]",value:c.data.void_reason,onChange:le,required:!0}),e[227]=le,e[228]=c.data.void_reason,e[229]=ne):ne=e[229];let re;e[230]!==c.errors.void_reason?(re=c.errors.void_reason&&t.jsx("p",{className:"text-sm text-red-500",children:c.errors.void_reason}),e[230]=c.errors.void_reason,e[231]=re):re=e[231];let ie;e[232]!==ne||e[233]!==re?(ie=t.jsxs("div",{className:"space-y-4 py-4",children:[Ts,t.jsxs("div",{className:"space-y-2",children:[As,ne,re]})]}),e[232]=ne,e[233]=re,e[234]=ie):ie=e[234];let oe;e[235]!==Ya||e[236]!==c.processing?(oe=t.jsx(f,{type:"button",variant:"outline",onClick:Ya,disabled:c.processing,children:"Cancel"}),e[235]=Ya,e[236]=c.processing,e[237]=oe):oe=e[237];const tl=c.processing?"Voiding...":"Void Loan";let ce;e[238]!==tl||e[239]!==c.processing?(ce=t.jsx(f,{type:"submit",variant:"destructive",disabled:c.processing,children:tl}),e[238]=tl,e[239]=c.processing,e[240]=ce):ce=e[240];let me;e[241]!==oe||e[242]!==ce?(me=t.jsxs(Xa,{children:[oe,ce]}),e[241]=oe,e[242]=ce,e[243]=me):me=e[243];let de;e[244]!==Qa||e[245]!==ie||e[246]!==me?(de=t.jsx(Wa,{className:"sm:max-w-[500px]",children:t.jsxs("form",{onSubmit:Qa,children:[Ms,ie,me]})}),e[244]=Qa,e[245]=ie,e[246]=me,e[247]=de):de=e[247];let pe;e[248]!==w||e[249]!==de?(pe=t.jsx(Za,{open:w,onOpenChange:Ns,children:de}),e[248]=w,e[249]=de,e[250]=pe):pe=e[250];let ue;e[251]!==d?(ue=t.jsx(Ua,{className:"flex items-center gap-2",children:d?t.jsxs(t.Fragment,{children:[t.jsx(Ja,{className:"h-5 w-5 text-orange-600"}),"Edit Penalty"]}):t.jsxs(t.Fragment,{children:[t.jsx(Ml,{className:"h-5 w-5 text-red-600"}),"Add Penalty"]})}),e[251]=d,e[252]=ue):ue=e[252];const sl=d?"Update the":"Add a";let fe;e[253]!==s.payment_schedules||e[254]!==m?(fe=m&&s.payment_schedules?.findIndex(i=>i.id===m.id)+1,e[253]=s.payment_schedules,e[254]=m,e[255]=fe):fe=e[255];let xe;e[256]!==m?(xe=m&&t.jsxs("span",{className:"ml-1 font-medium",children:["(Due:"," ",M(m.due_date),")"]}),e[256]=m,e[257]=xe):xe=e[257];let he;e[258]!==sl||e[259]!==fe||e[260]!==xe?(he=t.jsxs(Ga,{children:[sl," penalty for payment #"," ",fe,xe]}),e[258]=sl,e[259]=fe,e[260]=xe,e[261]=he):he=e[261];let ye;e[262]!==ue||e[263]!==he?(ye=t.jsxs(za,{children:[ue,he]}),e[262]=ue,e[263]=he,e[264]=ye):ye=e[264];let _e;e[265]!==d||e[266]!==m?.penalty_amount?(_e=d&&t.jsxs("div",{className:"rounded-md bg-orange-50 p-3 text-sm text-orange-800",children:[t.jsx("p",{className:"font-medium",children:"Current Penalty:"}),t.jsx("p",{className:"text-lg font-bold",children:u(parseFloat(m?.penalty_amount||0))})]}),e[265]=d,e[266]=m?.penalty_amount,e[267]=_e):_e=e[267];const al=d?"New Penalty Amount *":"Penalty Amount *";let je;e[268]!==al?(je=t.jsx(x,{htmlFor:"penalty_amount",children:al}),e[268]=al,e[269]=je):je=e[269];let Is;e[270]===Symbol.for("react.memo_cache_sentinel")?(Is=t.jsx("span",{className:"absolute top-2.5 left-3 text-sm text-muted-foreground",children:"₱"}),e[270]=Is):Is=e[270];let be;e[271]!==r?(be=i=>r.setData("penalty_amount",i.target.value),e[271]=r,e[272]=be):be=e[272];let ge;e[273]!==r.data.penalty_amount||e[274]!==be?(ge=t.jsxs("div",{className:"relative",children:[Is,t.jsx(v,{id:"penalty_amount",type:"number",step:"0.01",placeholder:"0.00",className:"pl-7",value:r.data.penalty_amount,onChange:be,required:!0})]}),e[273]=r.data.penalty_amount,e[274]=be,e[275]=ge):ge=e[275];let Ne;e[276]!==r.errors.penalty_amount?(Ne=r.errors.penalty_amount&&t.jsx("p",{className:"text-sm text-red-500",children:r.errors.penalty_amount}),e[276]=r.errors.penalty_amount,e[277]=Ne):Ne=e[277];let ve;e[278]!==je||e[279]!==ge||e[280]!==Ne?(ve=t.jsxs("div",{className:"space-y-2",children:[je,ge,Ne]}),e[278]=je,e[279]=ge,e[280]=Ne,e[281]=ve):ve=e[281];let Es;e[282]===Symbol.for("react.memo_cache_sentinel")?(Es=t.jsx(x,{htmlFor:"remarks",children:"Remarks (Optional)"}),e[282]=Es):Es=e[282];const ll=d?"Add any notes about this penalty update...":"Add any notes or remarks about this penalty...";let Se;e[283]!==r?(Se=i=>r.setData("remarks",i.target.value),e[283]=r,e[284]=Se):Se=e[284];let we;e[285]!==r.data.remarks||e[286]!==ll||e[287]!==Se?(we=t.jsx(Nl,{id:"remarks",placeholder:ll,className:"min-h-[100px]",value:r.data.remarks,onChange:Se}),e[285]=r.data.remarks,e[286]=ll,e[287]=Se,e[288]=we):we=e[288];let Pe;e[289]!==r.errors.remarks?(Pe=r.errors.remarks&&t.jsx("p",{className:"text-sm text-red-500",children:r.errors.remarks}),e[289]=r.errors.remarks,e[290]=Pe):Pe=e[290];let Ce;e[291]!==we||e[292]!==Pe?(Ce=t.jsxs("div",{className:"space-y-2",children:[Es,we,Pe]}),e[291]=we,e[292]=Pe,e[293]=Ce):Ce=e[293];let ke;e[294]!==_e||e[295]!==ve||e[296]!==Ce?(ke=t.jsxs("div",{className:"space-y-4 py-4",children:[_e,ve,Ce]}),e[294]=_e,e[295]=ve,e[296]=Ce,e[297]=ke):ke=e[297];let De;e[298]!==B||e[299]!==r.processing?(De=t.jsx(f,{type:"button",variant:"outline",onClick:B,disabled:r.processing,children:"Cancel"}),e[298]=B,e[299]=r.processing,e[300]=De):De=e[300];const nl=d?"default":"destructive",rl=r.processing?d?"Updating...":"Adding...":d?"Update Penalty":"Add Penalty";let Fe;e[301]!==r.processing||e[302]!==nl||e[303]!==rl?(Fe=t.jsx(f,{type:"submit",disabled:r.processing,variant:nl,children:rl}),e[301]=r.processing,e[302]=nl,e[303]=rl,e[304]=Fe):Fe=e[304];let Me;e[305]!==De||e[306]!==Fe?(Me=t.jsxs(Xa,{children:[De,Fe]}),e[305]=De,e[306]=Fe,e[307]=Me):Me=e[307];let Te;e[308]!==G||e[309]!==ye||e[310]!==ke||e[311]!==Me?(Te=t.jsx(Wa,{className:"sm:max-w-[500px]",children:t.jsxs("form",{onSubmit:G,children:[ye,ke,Me]})}),e[308]=G,e[309]=ye,e[310]=ke,e[311]=Me,e[312]=Te):Te=e[312];let Ae;e[313]!==F||e[314]!==Te?(Ae=t.jsx(Za,{open:F,onOpenChange:S,children:Te}),e[313]=F,e[314]=Te,e[315]=Ae):Ae=e[315];let Ls;e[316]===Symbol.for("react.memo_cache_sentinel")?(Ls=t.jsxs(Ua,{className:"flex items-center gap-2",children:[t.jsx(Sl,{className:"h-5 w-5"}),"Record Payment"]}),e[316]=Ls):Ls=e[316];let Ie;e[317]!==s.payment_schedules||e[318]!==m?(Ie=m&&s.payment_schedules?.findIndex(i=>i.id===m.id)+1,e[317]=s.payment_schedules,e[318]=m,e[319]=Ie):Ie=e[319];let Ee;e[320]!==m?(Ee=m&&t.jsxs("span",{className:"ml-1 font-medium",children:["(Due:"," ",M(m.due_date),")"]}),e[320]=m,e[321]=Ee):Ee=e[321];let Le;e[322]!==Ie||e[323]!==Ee?(Le=t.jsxs(za,{children:[Ls,t.jsxs(Ga,{children:["Record payment for Payment #",Ie,Ee]})]}),e[322]=Ie,e[323]=Ee,e[324]=Le):Le=e[324];let Hs;e[325]===Symbol.for("react.memo_cache_sentinel")?(Hs=t.jsx(x,{htmlFor:"amount_paid",children:"Amount Paid *"}),e[325]=Hs):Hs=e[325];let Os;e[326]===Symbol.for("react.memo_cache_sentinel")?(Os=t.jsx("span",{className:"absolute top-2.5 left-3 text-sm text-muted-foreground",children:"₱"}),e[326]=Os):Os=e[326];let He;e[327]!==l?(He=i=>l.setData("amount_paid",i.target.value),e[327]=l,e[328]=He):He=e[328];let Oe;e[329]!==l.data.amount_paid||e[330]!==He?(Oe=t.jsxs("div",{className:"relative",children:[Os,t.jsx(v,{id:"amount_paid",type:"number",step:"0.01",placeholder:"0.00",className:"pl-7",value:l.data.amount_paid,onChange:He,required:!0})]}),e[329]=l.data.amount_paid,e[330]=He,e[331]=Oe):Oe=e[331];let qe;e[332]!==l.errors.amount_paid?(qe=l.errors.amount_paid&&t.jsx("p",{className:"text-sm text-red-500",children:l.errors.amount_paid}),e[332]=l.errors.amount_paid,e[333]=qe):qe=e[333];let Re;e[334]!==Oe||e[335]!==qe?(Re=t.jsxs("div",{className:"space-y-2",children:[Hs,Oe,qe]}),e[334]=Oe,e[335]=qe,e[336]=Re):Re=e[336];let qs;e[337]===Symbol.for("react.memo_cache_sentinel")?(qs=t.jsx(x,{htmlFor:"payment_method",children:"Payment Method *"}),e[337]=qs):qs=e[337];let $e;e[338]!==l?($e=i=>l.setData("payment_method",i.target.value),e[338]=l,e[339]=$e):$e=e[339];let Rs,$s,Bs,Vs,zs;e[340]===Symbol.for("react.memo_cache_sentinel")?(Rs=t.jsx("option",{value:"cash",children:"Cash"}),$s=t.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),Bs=t.jsx("option",{value:"gcash",children:"GCash"}),Vs=t.jsx("option",{value:"paymaya",children:"PayMaya"}),zs=t.jsx("option",{value:"check",children:"Check"}),e[340]=Rs,e[341]=$s,e[342]=Bs,e[343]=Vs,e[344]=zs):(Rs=e[340],$s=e[341],Bs=e[342],Vs=e[343],zs=e[344]);let Be;e[345]!==l.data.payment_method||e[346]!==$e?(Be=t.jsxs("select",{id:"payment_method",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:outline-none",value:l.data.payment_method,onChange:$e,required:!0,children:[Rs,$s,Bs,Vs,zs]}),e[345]=l.data.payment_method,e[346]=$e,e[347]=Be):Be=e[347];let Ve;e[348]!==l.errors.payment_method?(Ve=l.errors.payment_method&&t.jsx("p",{className:"text-sm text-red-500",children:l.errors.payment_method}),e[348]=l.errors.payment_method,e[349]=Ve):Ve=e[349];let ze;e[350]!==Be||e[351]!==Ve?(ze=t.jsxs("div",{className:"space-y-2",children:[qs,Be,Ve]}),e[350]=Be,e[351]=Ve,e[352]=ze):ze=e[352];let Us;e[353]===Symbol.for("react.memo_cache_sentinel")?(Us=t.jsx(x,{htmlFor:"payment_date",children:"Payment Date *"}),e[353]=Us):Us=e[353];let Ue;e[354]!==l?(Ue=i=>l.setData("payment_date",i.target.value),e[354]=l,e[355]=Ue):Ue=e[355];let Ge;e[356]!==l.data.payment_date||e[357]!==Ue?(Ge=t.jsx(v,{id:"payment_date",type:"date",value:l.data.payment_date,onChange:Ue,required:!0}),e[356]=l.data.payment_date,e[357]=Ue,e[358]=Ge):Ge=e[358];let Xe;e[359]!==l.errors.payment_date?(Xe=l.errors.payment_date&&t.jsx("p",{className:"text-sm text-red-500",children:l.errors.payment_date}),e[359]=l.errors.payment_date,e[360]=Xe):Xe=e[360];let We;e[361]!==Ge||e[362]!==Xe?(We=t.jsxs("div",{className:"space-y-2",children:[Us,Ge,Xe]}),e[361]=Ge,e[362]=Xe,e[363]=We):We=e[363];let Gs;e[364]===Symbol.for("react.memo_cache_sentinel")?(Gs=t.jsx(x,{htmlFor:"reference_number",children:"Reference Number"}),e[364]=Gs):Gs=e[364];let Ze;e[365]!==l?(Ze=i=>l.setData("reference_number",i.target.value),e[365]=l,e[366]=Ze):Ze=e[366];let Je;e[367]!==l.data.reference_number||e[368]!==Ze?(Je=t.jsx(v,{id:"reference_number",type:"text",placeholder:"Enter reference number",value:l.data.reference_number,onChange:Ze}),e[367]=l.data.reference_number,e[368]=Ze,e[369]=Je):Je=e[369];let Ke;e[370]!==l.errors.reference_number?(Ke=l.errors.reference_number&&t.jsx("p",{className:"text-sm text-red-500",children:l.errors.reference_number}),e[370]=l.errors.reference_number,e[371]=Ke):Ke=e[371];let Qe;e[372]!==Je||e[373]!==Ke?(Qe=t.jsxs("div",{className:"space-y-2",children:[Gs,Je,Ke]}),e[372]=Je,e[373]=Ke,e[374]=Qe):Qe=e[374];let Xs;e[375]===Symbol.for("react.memo_cache_sentinel")?(Xs=t.jsx(x,{htmlFor:"receipt_number",children:"Receipt Number"}),e[375]=Xs):Xs=e[375];let Ye;e[376]!==l?(Ye=i=>l.setData("receipt_number",i.target.value),e[376]=l,e[377]=Ye):Ye=e[377];let et;e[378]!==l.data.receipt_number||e[379]!==Ye?(et=t.jsx(v,{id:"receipt_number",type:"text",placeholder:"Enter receipt number",value:l.data.receipt_number,onChange:Ye}),e[378]=l.data.receipt_number,e[379]=Ye,e[380]=et):et=e[380];let tt;e[381]!==l.errors.receipt_number?(tt=l.errors.receipt_number&&t.jsx("p",{className:"text-sm text-red-500",children:l.errors.receipt_number}),e[381]=l.errors.receipt_number,e[382]=tt):tt=e[382];let st;e[383]!==et||e[384]!==tt?(st=t.jsxs("div",{className:"space-y-2",children:[Xs,et,tt]}),e[383]=et,e[384]=tt,e[385]=st):st=e[385];let at;e[386]!==Re||e[387]!==ze||e[388]!==We||e[389]!==Qe||e[390]!==st?(at=t.jsxs("div",{className:"space-y-4 py-4",children:[Re,ze,We,Qe,st]}),e[386]=Re,e[387]=ze,e[388]=We,e[389]=Qe,e[390]=st,e[391]=at):at=e[391];let lt;e[392]!==$||e[393]!==l.processing?(lt=t.jsx(f,{type:"button",variant:"outline",onClick:$,disabled:l.processing,children:"Cancel"}),e[392]=$,e[393]=l.processing,e[394]=lt):lt=e[394];const il=l.processing?"Recording...":"Record Payment";let nt;e[395]!==l.processing||e[396]!==il?(nt=t.jsx(f,{type:"submit",disabled:l.processing,children:il}),e[395]=l.processing,e[396]=il,e[397]=nt):nt=e[397];let rt;e[398]!==lt||e[399]!==nt?(rt=t.jsxs(Xa,{children:[lt,nt]}),e[398]=lt,e[399]=nt,e[400]=rt):rt=e[400];let it;e[401]!==U||e[402]!==rt||e[403]!==Le||e[404]!==at?(it=t.jsx(Wa,{className:"sm:max-w-[500px]",children:t.jsxs("form",{onSubmit:U,children:[Le,at,rt]})}),e[401]=U,e[402]=rt,e[403]=Le,e[404]=at,e[405]=it):it=e[405];let ot;e[406]!==b||e[407]!==it?(ot=t.jsx(Za,{open:b,onOpenChange:_,children:it}),e[406]=b,e[407]=it,e[408]=ot):ot=e[408];let Ws;e[409]===Symbol.for("react.memo_cache_sentinel")?(Ws=t.jsxs(Ua,{className:"flex items-center gap-2",children:[t.jsx(Ja,{className:"h-5 w-5"}),"Edit Payment"]}),e[409]=Ws):Ws=e[409];const ol=j?.schedule_number;let ct;e[410]!==ol?(ct=t.jsxs(za,{children:[Ws,t.jsxs(Ga,{children:["Edit payment details for Payment #",ol]})]}),e[410]=ol,e[411]=ct):ct=e[411];let Zs;e[412]===Symbol.for("react.memo_cache_sentinel")?(Zs=t.jsx(x,{htmlFor:"edit_amount_paid",children:"Amount Paid *"}),e[412]=Zs):Zs=e[412];let Js;e[413]===Symbol.for("react.memo_cache_sentinel")?(Js=t.jsx("span",{className:"absolute top-2.5 left-3 text-sm text-muted-foreground",children:"₱"}),e[413]=Js):Js=e[413];let mt;e[414]!==a?(mt=i=>a.setData("amount_paid",i.target.value),e[414]=a,e[415]=mt):mt=e[415];let dt;e[416]!==a.data.amount_paid||e[417]!==mt?(dt=t.jsxs("div",{className:"relative",children:[Js,t.jsx(v,{id:"edit_amount_paid",type:"number",step:"0.01",placeholder:"0.00",className:"pl-7",value:a.data.amount_paid,onChange:mt,required:!0})]}),e[416]=a.data.amount_paid,e[417]=mt,e[418]=dt):dt=e[418];let pt;e[419]!==a.errors.amount_paid?(pt=a.errors.amount_paid&&t.jsx("p",{className:"text-sm text-red-500",children:a.errors.amount_paid}),e[419]=a.errors.amount_paid,e[420]=pt):pt=e[420];let ut;e[421]!==dt||e[422]!==pt?(ut=t.jsxs("div",{className:"space-y-2",children:[Zs,dt,pt]}),e[421]=dt,e[422]=pt,e[423]=ut):ut=e[423];let Ks;e[424]===Symbol.for("react.memo_cache_sentinel")?(Ks=t.jsx(x,{htmlFor:"edit_payment_method",children:"Payment Method *"}),e[424]=Ks):Ks=e[424];let ft;e[425]!==a?(ft=i=>a.setData("payment_method",i.target.value),e[425]=a,e[426]=ft):ft=e[426];let Qs,Ys,ea,ta,sa;e[427]===Symbol.for("react.memo_cache_sentinel")?(Qs=t.jsx("option",{value:"cash",children:"Cash"}),Ys=t.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),ea=t.jsx("option",{value:"gcash",children:"GCash"}),ta=t.jsx("option",{value:"paymaya",children:"PayMaya"}),sa=t.jsx("option",{value:"check",children:"Check"}),e[427]=Qs,e[428]=Ys,e[429]=ea,e[430]=ta,e[431]=sa):(Qs=e[427],Ys=e[428],ea=e[429],ta=e[430],sa=e[431]);let xt;e[432]!==a.data.payment_method||e[433]!==ft?(xt=t.jsxs("select",{id:"edit_payment_method",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:outline-none",value:a.data.payment_method,onChange:ft,required:!0,children:[Qs,Ys,ea,ta,sa]}),e[432]=a.data.payment_method,e[433]=ft,e[434]=xt):xt=e[434];let ht;e[435]!==a.errors.payment_method?(ht=a.errors.payment_method&&t.jsx("p",{className:"text-sm text-red-500",children:a.errors.payment_method}),e[435]=a.errors.payment_method,e[436]=ht):ht=e[436];let yt;e[437]!==xt||e[438]!==ht?(yt=t.jsxs("div",{className:"space-y-2",children:[Ks,xt,ht]}),e[437]=xt,e[438]=ht,e[439]=yt):yt=e[439];let aa;e[440]===Symbol.for("react.memo_cache_sentinel")?(aa=t.jsx(x,{htmlFor:"edit_payment_date",children:"Payment Date *"}),e[440]=aa):aa=e[440];let _t;e[441]!==a?(_t=i=>a.setData("payment_date",i.target.value),e[441]=a,e[442]=_t):_t=e[442];let jt;e[443]!==a.data.payment_date||e[444]!==_t?(jt=t.jsx(v,{id:"edit_payment_date",type:"date",value:a.data.payment_date,onChange:_t,required:!0}),e[443]=a.data.payment_date,e[444]=_t,e[445]=jt):jt=e[445];let bt;e[446]!==a.errors.payment_date?(bt=a.errors.payment_date&&t.jsx("p",{className:"text-sm text-red-500",children:a.errors.payment_date}),e[446]=a.errors.payment_date,e[447]=bt):bt=e[447];let gt;e[448]!==jt||e[449]!==bt?(gt=t.jsxs("div",{className:"space-y-2",children:[aa,jt,bt]}),e[448]=jt,e[449]=bt,e[450]=gt):gt=e[450];let la;e[451]===Symbol.for("react.memo_cache_sentinel")?(la=t.jsx(x,{htmlFor:"edit_reference_number",children:"Reference Number"}),e[451]=la):la=e[451];let Nt;e[452]!==a?(Nt=i=>a.setData("reference_number",i.target.value),e[452]=a,e[453]=Nt):Nt=e[453];let vt;e[454]!==a.data.reference_number||e[455]!==Nt?(vt=t.jsx(v,{id:"edit_reference_number",type:"text",placeholder:"Enter reference number",value:a.data.reference_number,onChange:Nt}),e[454]=a.data.reference_number,e[455]=Nt,e[456]=vt):vt=e[456];let St;e[457]!==a.errors.reference_number?(St=a.errors.reference_number&&t.jsx("p",{className:"text-sm text-red-500",children:a.errors.reference_number}),e[457]=a.errors.reference_number,e[458]=St):St=e[458];let wt;e[459]!==vt||e[460]!==St?(wt=t.jsxs("div",{className:"space-y-2",children:[la,vt,St]}),e[459]=vt,e[460]=St,e[461]=wt):wt=e[461];let na;e[462]===Symbol.for("react.memo_cache_sentinel")?(na=t.jsx(x,{htmlFor:"edit_receipt_number",children:"Receipt Number"}),e[462]=na):na=e[462];let Pt;e[463]!==a?(Pt=i=>a.setData("receipt_number",i.target.value),e[463]=a,e[464]=Pt):Pt=e[464];let Ct;e[465]!==a.data.receipt_number||e[466]!==Pt?(Ct=t.jsx(v,{id:"edit_receipt_number",type:"text",placeholder:"Enter receipt number",value:a.data.receipt_number,onChange:Pt}),e[465]=a.data.receipt_number,e[466]=Pt,e[467]=Ct):Ct=e[467];let kt;e[468]!==a.errors.receipt_number?(kt=a.errors.receipt_number&&t.jsx("p",{className:"text-sm text-red-500",children:a.errors.receipt_number}),e[468]=a.errors.receipt_number,e[469]=kt):kt=e[469];let Dt;e[470]!==Ct||e[471]!==kt?(Dt=t.jsxs("div",{className:"space-y-2",children:[na,Ct,kt]}),e[470]=Ct,e[471]=kt,e[472]=Dt):Dt=e[472];let Ft;e[473]!==ut||e[474]!==yt||e[475]!==gt||e[476]!==wt||e[477]!==Dt?(Ft=t.jsxs("div",{className:"space-y-4 py-4",children:[ut,yt,gt,wt,Dt]}),e[473]=ut,e[474]=yt,e[475]=gt,e[476]=wt,e[477]=Dt,e[478]=Ft):Ft=e[478];let Mt;e[479]!==V||e[480]!==j?.id?(Mt=()=>V(j?.id),e[479]=V,e[480]=j?.id,e[481]=Mt):Mt=e[481];const cl=a.processing||!j;let Tt;e[482]!==Mt||e[483]!==cl?(Tt=t.jsx(f,{type:"button",variant:"destructive",onClick:Mt,disabled:cl,children:"Delete Payment"}),e[482]=Mt,e[483]=cl,e[484]=Tt):Tt=e[484];let At;e[485]!==a.processing||e[486]!==R?(At=t.jsx(f,{type:"button",variant:"outline",onClick:R,disabled:a.processing,children:"Cancel"}),e[485]=a.processing,e[486]=R,e[487]=At):At=e[487];const ml=a.processing?"Updating...":"Update Payment";let It;e[488]!==a.processing||e[489]!==ml?(It=t.jsx(f,{type:"submit",disabled:a.processing,children:ml}),e[488]=a.processing,e[489]=ml,e[490]=It):It=e[490];let Et;e[491]!==At||e[492]!==It?(Et=t.jsxs("div",{className:"flex gap-2",children:[At,It]}),e[491]=At,e[492]=It,e[493]=Et):Et=e[493];let Lt;e[494]!==Tt||e[495]!==Et?(Lt=t.jsxs(Xa,{className:"gap-2",children:[Tt,Et]}),e[494]=Tt,e[495]=Et,e[496]=Lt):Lt=e[496];let Ht;e[497]!==z||e[498]!==ct||e[499]!==Ft||e[500]!==Lt?(Ht=t.jsx(Wa,{className:"sm:max-w-[500px]",children:t.jsxs("form",{onSubmit:z,children:[ct,Ft,Lt]})}),e[497]=z,e[498]=ct,e[499]=Ft,e[500]=Lt,e[501]=Ht):Ht=e[501];let Ot;e[502]!==g||e[503]!==Ht?(Ot=t.jsx(Za,{open:g,onOpenChange:y,children:Ht}),e[502]=g,e[503]=Ht,e[504]=Ot):Ot=e[504];let ra;return e[505]!==q||e[506]!==ot||e[507]!==Ot||e[508]!==D||e[509]!==ae||e[510]!==pe||e[511]!==Ae?(ra=t.jsxs(q,{children:[D,ae,pe,Ae,ot,Ot]}),e[505]=q,e[506]=ot,e[507]=Ot,e[508]=D,e[509]=ae,e[510]=pe,e[511]=Ae,e[512]=ra):ra=e[512],ra}function sn(o){return o.status.toLowerCase()!=="paid"}function an(o,e){return o+parseFloat(e.amount_paid||0)}function ln(o){return o.status.toLowerCase()!=="paid"}function nn(o,e){return o+parseFloat(e.amount_paid||0)}function rn(o,e){return new Date(e.payment_date).getTime()-new Date(o.payment_date).getTime()}function on(o){return o&&o.id}function cn(){h.error("Failed to delete payment")}function mn(){h.error("Failed to update payment")}function dn(){h.error("Failed to record payment")}function pn(o,e){return o+parseFloat(e.amount_paid||0)}function un(o,e){const s=e.payment_histories?.reduce(fn,0)||0;return o+s}function fn(o,e){return o+parseFloat(e.amount_paid||0)}function xn(o){const e={pending:{variant:"outline",label:"Pending"},paid:{variant:"default",label:"Paid"},overdue:{variant:"destructive",label:"Overdue"},partial:{variant:"outline",label:"Partial"}},s=e[o.toLowerCase()]||e.pending;return t.jsxs(Tl,{variant:s.variant,className:"flex w-fit items-center gap-1",children:[t.jsx(Vl,{className:"h-3 w-3"}),s.label]})}function hn(o){return new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}function yn(o){return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(o)}function _n(){h.error("Failed to void loan")}export{Wn as default};
